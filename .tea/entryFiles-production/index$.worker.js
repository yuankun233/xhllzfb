/**! __BUGME_START__ */ !function(){"use strict";function getObjectOwnPropertyDescriptors(e){return Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors(e):Object.getOwnPropertyNames(e).reduce((function(t,r){return t[r]=Object.getOwnPropertyDescriptor(e,r),t}),Object.create(null))}function isError(e){return"[object Error]"===Object.prototype.toString.call(e)||e instanceof Error}function isDate(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)||e instanceof RegExp}function isPromise(e){return"[object Promise]"===Object.prototype.toString.call(e)||e instanceof Promise}var ObjectMapper=function(){function e(e){this.objectStore=e}return e.prototype.mapFrom=function(e,t){var r=this;return Array.from(e).map((function(e){return r.mapFromOne(e,t)}))},e.prototype.mapFromOne=function(e,t){switch(typeof e){case"string":return this.mapString(e);case"number":return this.mapNumber(e);case"object":return Array.isArray(e)?this.mapArray(e,"table"===t):null===e?this.mapNull():this.mapObject(e,"table"===t);case"function":return this.mapFunction(e);case"undefined":return this.mapUndef();case"boolean":return this.mapBoolean(e);default:return{type:typeof e,value:e}}},e.prototype.mapString=function(e){return{type:"string",value:e}},e.prototype.mapNumber=function(e){return{type:"number",value:e,description:String(e)}},e.prototype.mapBoolean=function(e){return{type:"boolean",value:e}},e.prototype.mapFunction=function(e){var t=this.objectStore.save(e);return{type:"function",className:"Function",description:e.toString(),objectId:t}},e.prototype.mapUndef=function(){return{type:"undefined"}},e.prototype.mapNull=function(){return{type:"object",subtype:"null",value:null}},e.prototype.mapObject=function(e,t){var r,n,s=this,i=getObjectOwnPropertyDescriptors(e),o=Object.keys(i),a=this.objectStore.save(e),c=e.constructor?e.constructor.name:"Object",p=o.length>5&&!t,u={type:"object",className:c,description:c,objectId:a,preview:{type:"object",description:c,overflow:p,properties:(p?o.slice(0,5):o).map((function(e){return s.getPropertyPreview4ObjectProperty(e,i[e],t)})).filter(Boolean)}};return isError(e)?(r="error",-1===(n=e.stack||"").indexOf(e.name)&&(n=e.toString()+"\n"+n)):isDate(e)?(r="date",n=e.toString()):isRegExp(e)?(r="regexp",n=e.toString()):isPromise(e)&&(r="promise",n="Promise"),r&&(u.subtype=r,u.preview&&(u.preview.subtype=r)),n&&(u.description=n,u.preview&&(u.preview.description=n)),u},e.prototype.mapArray=function(e,t){var r=this,n=e.length>100&&!t,s="Array("+e.length+")";return{type:"object",subtype:"array",className:"Array",description:s,objectId:this.objectStore.save(e),preview:{type:"object",subtype:"array",description:s,overflow:n,properties:(n?e.slice(0,100):e).map((function(e,n){return r.getPropertyPreview4ArrayProperty(n,e,t)}))}}},e.prototype.getPropertyPreview4ArrayProperty=function(e,t,r){return this.getPropertyPreview4AnyValue(String(e),t,r)},e.prototype.getPropertyPreview4ObjectProperty=function(e,t,r){return t.get?{name:e,type:"accessor"}:t.set?void 0:this.getPropertyPreview4AnyValue(e,t.value,r)},e.prototype.getPropertyPreview4AnyValue=function(e,t,r){switch(void 0===r&&(r=!1),typeof t){case"object":if(Array.isArray(t)){var n={name:e,type:"object",subtype:"array",value:"Array("+t.length+")"};return r&&(n.valuePreview=this.getValuePreview4TableArray(t)),n}if(null===t)return{name:e,type:"object",subtype:"null",value:"null"};n={name:e,type:"object",value:t.constructor?t.constructor.name:"Object"};return r&&(n.valuePreview=this.getValuePreview4TableObject(t)),n;case"function":return{type:"function",value:"",name:e};default:return{name:e,type:typeof t,value:String(t)}}},e.prototype.getValuePreview4TableArray=function(e){var t=this;return{type:"object",subtype:"array",description:"Array("+e.length+")",overflow:!1,properties:e.map((function(e,r){return t.getPropertyPreview4AnyValue(String(r),e)}))}},e.prototype.getValuePreview4TableObject=function(e){var t=this;return{type:"object",description:"Object",overflow:!1,properties:Object.keys(e).map((function(r){return t.getPropertyPreview4AnyValue(r,e[r])}))}},e}(),extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var ExtractStackLine=function(){function e(){this.e1=/\s*at\s(\S+)\s(\S+)\:(\d+)\:(\d+)\)/,this.e2=/\s*at\s(\S+)\:(\d+)\:(\d+)/}return e.prototype.testType1=function(e){return this.e1.test(e)},e.prototype.testType2=function(e){return this.e2.test(e)},e.prototype.extractType1=function(e){var t=e.match(this.e1);return null==t?null:{functionName:t[1],url:t[2].slice(1),lineNumber:Number(t[3]),columnNumber:Number(t[4])}},e.prototype.extractType2=function(e){var t=e.match(this.e2);return null==t?null:{functionName:"",url:t[1].slice(1),lineNumber:Number(t[2]),columnNumber:Number(t[3])}},e}(),CallFramesMapper=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.mapFrom=function(e){var t=this;return e.split("\n").slice(2).map((function(e,r){return t.testType1(e)?t.extractType1(e):t.testType2(e)?t.extractType2(e):void 0})).filter((function(e){return null!=e}))},t}(ExtractStackLine),executionContextId=1,injectedScriptId=1,ObjectStore=function(){function e(){this.id=0,this.id2Object=new Map,this.object2Id=new Map}return e.prototype.save=function(e){if(this.object2Id.has(e))return this.object2Id.get(e);var t=this.getNextObjectId();return this.id2Object.set(t,e),this.object2Id.set(e,t),t},e.prototype.query=function(e){return this.id2Object.get(e)},e.prototype.clear=function(e){var t=this.id2Object.get(e);t&&(this.id2Object.delete(e),this.object2Id.delete(t))},e.prototype.clearAll=function(){this.id2Object.clear(),this.object2Id.clear()},e.prototype.getNextObjectId=function(){return this.id++,'{"injectedScriptId":'+injectedScriptId+',"id":'+this.id+"}"},e}(),GetPropertiesHandler=function(){function e(e,t){this.objectStore=e,this.objectMapper=t}return e.prototype.handle=function(e){var t=this.objectStore.query(e.objectId);return t?{result:this.mapObject(t,Boolean(e.ownProperties),Boolean(e.accessorPropertiesOnly))}:{result:[]}},e.prototype.mapObject=function(e,t,r){var n=this;if(t){var s=getObjectOwnPropertyDescriptors(e),i=Object.keys(s).filter((function(e){return!(r&&!s[e].get&&!s[e].set)})).map((function(e){return n.mapResultOne(e,s[e],!0)}));return e.__proto__&&i.push(this.mapResultOne("__proto__",{configurable:!0,enumerable:!1,writable:!0,value:e.__proto__},!0)),i}for(var o=[],a={},c=e,p=!1,u=!0,l=function(){var e=getObjectOwnPropertyDescriptors(c);if(Object.keys(e).forEach((function(t){if(!a[t]){a[t]=!0;var s=e[t];(!r||s.get||s.set)&&o.push(n.mapResultOne(t,s,u))}})),!p){var t=Object.getOwnPropertyDescriptor(c,"__proto__");t&&(p=!0,o.push(y.mapResultOne("__proto__",t,u)))}c=c.__proto__,u=!1},y=this;c;)l();return o},e.prototype.mapResultOne=function(e,t,r){var n={writable:t.writable,configurable:Boolean(t.configurable),enumerable:Boolean(t.enumerable),isOwn:r,name:String(e)};return"value"in t&&(n.value=this.objectMapper.mapFromOne(t.value)),t.get&&(n.get=this.objectMapper.mapFromOne(t.get)),t.set&&(n.set=this.objectMapper.mapFromOne(t.set)),n},e}(),RemoteObjectParser=function(){function e(){this.objectStore=new ObjectStore,this.objectMapper=new ObjectMapper(this.objectStore),this.callFramesMapper=new CallFramesMapper,this.getPropertiesHandler=new GetPropertiesHandler(this.objectStore,this.objectMapper)}return e.prototype.parseObject=function(e,t){return this.objectMapper.mapFromOne(e,t)},e.prototype.getProperties=function(e){return this.getPropertiesHandler.handle(e)},e.prototype.getObjectById=function(e){return this.objectStore.query(e)},e.prototype.consoleAPICalled=function(e,t,r){var n=e;return"warn"===e&&(n="warning"),{method:"Runtime.consoleAPICalled",params:{type:n,args:this.objectMapper.mapFrom(r,e),executionContextId:executionContextId,timestamp:Date.now(),stackTrace:{callFrames:this.callFramesMapper.mapFrom(t)}}}},e}(),ResponseEvent,RequestMethod,BreakStepType,FingerType;function getStartupParams(){if("undefined"!=typeof __appxStartupParams&&__appxStartupParams&&__appxStartupParams.appId)return __appxStartupParams;if("undefined"!=typeof my)try{return my.callSync("getStartupParams")||{}}catch(e){}return{}}!function(e){e.ById="Tyro.byId",e.Sticky="Tyro.sticky",e.StickyNotSendPaused="Tyro.stickyNotSendPaused",e.StickyAsync="Tyro.stickyAsync",e.ScriptSource="Tyro.scriptSource",e.Resumed="Debugger.resumed",e.ConsoleAPICalled="Runtime.consoleAPICalled"}(ResponseEvent||(ResponseEvent={})),function(e){e.DiscardConsoleEntries="Tyro.discardConsoleEntries",e.Evaluate="Tyro.evaluate",e.EvaluateOnCallFrame="Tyro.evaluateOnCallFrame",e.CallFunctionOn="Tyro.callFunctionOn",e.CompileScript="Tyro.compileScript",e.SetBreakpointsActive="Tyro.setBreakpointsActive",e.SetSkipAllPauses="Tyro.setSkipAllPauses",e.Resume="Tyro.resume",e.StepInto="Tyro.stepInto",e.StepOver="Tyro.stepOver",e.StepOut="Tyro.stepOut",e.Pause="Tyro.pause",e.GetPossibleBreakpoints="Tyro.getPossibleBreakpoints",e.SetBreakpointByUrl="Tyro.setBreakpointByUrl",e.SetBreakpoint="Tyro.setBreakpoint",e.RemoveBreakpoint="Tyro.removeBreakpoint",e.REPL="Tyro.repl",e.GetVariableValue="Tyro.getVariableValue",e.SetPauseOnExceptions="Tyro.setPauseOnExceptions",e.SetAsyncCallStackDepth="Tyro.setAsyncCallStackDepth",e.GetProperties="Tyro.getProperties"}(RequestMethod||(RequestMethod={})),function(e){e[e.Non=0]="Non",e[e.NextSticky=1]="NextSticky",e[e.StepOver=2]="StepOver",e[e.StepOut=3]="StepOut"}(BreakStepType||(BreakStepType={})),function(e){e[e.Entry=0]="Entry",e[e.Exit=1]="Exit"}(FingerType||(FingerType={}));var serverConfig={default:{domain:"hpmweb.alipay.com"},1:{domain:"hpmweb.alipay.com"}};function getServerConfig(){var e=getStartupParams().remoteCh;return e&&serverConfig[e]?serverConfig[e]:serverConfig.default}var appxStackLine=/https:\/\/appx\/af-appx\.worker\.min\.js:\d+:\d+/,nativeScriptLine=/https:\/\/www\.alipay\.com\/?:\d+:\d+|\[native code\]/,pluginWorkerStackLine=/https:\/\/\d+\.hybrid\.\S+\.com\/__plugins__\/(\d+)\/index\.worker\.js:\d+:\d+/,appWorkerStackLine=/https:\/\/\d+\.hybrid\.\S+\.com\/index\.worker\.js:\d+:\d+/;function transformSourceUrl(e){try{return pluginWorkerStackLine.test(e)?e.replace(pluginWorkerStackLine,"Plugin-$1"):e.replace(appWorkerStackLine,"App")}catch(t){return e}}function formatErrorStack(e){var t=e.split("\n"),r=t[0],n=t.slice(1).filter((function(e){return!appxStackLine.test(e)&&!nativeScriptLine.test(e)})).map(transformSourceUrl);return n.unshift(r),n.join("\n")}function formatErrorRemoteObject(e){return e.description&&(e.description=formatErrorStack(e.description)),e.preview&&e.preview.description&&(e.preview.description=e.description),e}var TYRO_EXECUTION_CONTEXT_ID=0,TyroUtil=function(){function e(){}return e.throwsMessage=function(e){return"[Throws: "+(e?e.message:"?")+"]"},e.safeGetValueFromPropertyOnObject=function(t,r){if(Object.prototype.hasOwnProperty.call(t,r))try{return t[r]}catch(t){return e.throwsMessage(t)}return t[r]},e.ensureProperties=function(t){var r=[];return function t(n){if(null===n||"object"!=typeof n)return n;if(-1!==r.indexOf(n))return"[Circular]";if(r.push(n),"function"==typeof n.toJSON)try{var s=t(n.toJSON());return r.pop(),s}catch(t){return e.throwsMessage(t)}if(Array.isArray(n)){var i=n.map(t);return r.pop(),i}var o=Object.keys(n).reduce((function(r,s){return r[s]=t(e.safeGetValueFromPropertyOnObject(n,s)),r}),{});return r.pop(),o}(t)},e.safeJSONStringify=function(t,r,n){return JSON.stringify(e.ensureProperties(t),r,n)},e.isWebIDE=function(){return!("undefined"==typeof navigator||!navigator)&&(navigator.swuserAgent||navigator.userAgent||"").indexOf("AlipayIDE")>-1},e}(),StickyFinger=function(){function StickyFinger(e,t,r,n){var s=this;this.isWebIDE=!1,this.asyncRequestMethod="tyroRequest",this.host=t,this.contextMap={},this.contextUrlMap={},this.breakpointMap={},this.breakpointIdMap={},this.debuggerMap={},this.originConsoleAPI={},this.requestTaskId=0,this.stickyMsgQueue=[],this.wsMsgQueue=[],this.wsIsOpen=!1,this.instrumentId=r,this.stickyFlag=n.stickyFlag,this.fingerFlag=n.fingerFlag,this.remoteObjectParser=new RemoteObjectParser,this.hookConsole(),this.stickyFlag&&(setTimeout((function(){s.socketTask=my.connectSocket({url:"wss://"+getServerConfig().domain+"/tyro/agent/"+s.instrumentId,multiple:!0});var e=function(){if(!s.wsIsOpen){s.originConsoleAPI.log("[tyro-agent] WebSocket 连接成功"),s.wsIsOpen=!0;for(var e=0,t=s.wsMsgQueue;e<t.length;e++){var r=t[e];s.socketTask.send({data:r})}s.wsMsgQueue=[]}};s.socketTask.onOpen((function(){e()})),s.socketTask.onClose((function(){s.originConsoleAPI.log("[tyro-agent] WebSocket 连接已关闭")})),s.socketTask.onMessage((function(t){s.wsIsOpen||e(),s.handleStickyAsync(JSON.parse(t.data.data))}))}),2e3),this.breakpointsActive=!0,this.skipAllPauses=!1,this.breakStepType=BreakStepType.Non,this.stackDepth=0,this.pauseOnExceptions="none",this.asyncCallStackDepth=0,this.lastStickyAsyncError=0,this.globalExecutionContext=e,this.evaluateOnCallFrameExpression="",this.stickyNotSendPaused=!1,this.sendStickyParams=!1),this.fingerFlag&&(this.fingerId=0,this.fingerCache=[],this.fingerSendInterval=1e3,this.jsapiCallId=0,setInterval((function(){0!==s.fingerCache.length&&(s.sendPerf("Perf.trace",s.fingerCache),s.fingerCache=[])}),this.fingerSendInterval)),this.isWebIDE=TyroUtil.isWebIDE(),this.isWebIDE&&(this.asyncRequestMethod="tyroRequestAsync")}return StickyFinger.rewritePath=function(e){var t=e;return"."===t[0]&&(t=t.replace(".","")),t="app://"+(t=t.replace("tmp/data/build/",""))},StickyFinger.processRawContext=function(e){var t={path:this.rewritePath(e.path),contextId:String(e.contextId),scope:{0:[]},function:{},debuggerLine:e.debuggerLine,stickyLine:e.stickyLine};return e.scope&&Object.keys(e.scope).map((function(r){var n=e.scope[r],s=n.shift(),i=t.scope[s];t.scope[r]=i?i.concat(n.filter((function(e){return i.indexOf(e)<0}))):n})),e.function&&Object.keys(e.function).map((function(r){var n=e.function[r];t.function[r]={name:n[0],line:n[1]}})),t},StickyFinger.prototype.register=function(e,t){var r=String(e.contextId),n=StickyFinger.rewritePath(e.path);this.originConsoleAPI.log("[tyro-agent] register contextId "+r+" path "+n),this.contextMap[r]||this.breakpointMap[r]?this.originConsoleAPI.warn("[tyro-agent] duplicate context register "+r+" "+n):(this.contextMap[r]=StickyFinger.processRawContext(e),this.contextUrlMap[n]=r,this.breakpointMap[r]={},this.debuggerMap[r]=this.contextMap[r].debuggerLine.reduce((function(e,t){return e[t-1]=!0,e}),{}),this.stickyFlag&&this.xhrSend(ResponseEvent.ScriptSource,{scriptSource:t,scriptId:String(r),executionContextId:TYRO_EXECUTION_CONTEXT_ID,url:n}))},StickyFinger.prototype.sticky=function(e,t,r){if(!this.skipAllPauses&&this.breakpointsActive&&((this.debuggerMap[e]||{})[t]||(this.breakpointMap[e]||{})[t]||this.breakStepType===BreakStepType.NextSticky||this.breakStepType===BreakStepType.StepOver&&(new Error).stack.split("\n").length<=this.stackDepth||this.breakStepType===BreakStepType.StepOut&&(new Error).stack.split("\n").length<this.stackDepth||!0===this.sendStickyParams)){this.originConsoleAPI.log("[tyro-agent] sticky "+e+" "+t),this.breakStepType=BreakStepType.Non;var n={};if(this.stickyNotSendPaused)this.originConsoleAPI.log("[tyro-agent] stickyNotSendPaused");else{if(!this.sendStickyParams){this.originConsoleAPI.log("[tyro-agent] sticky sendStickyParams step 1"),n={callFrames:null,reason:"other",hitBreakpoints:[]};var s=this.breakpointMap[e][t];s&&n.hitBreakpoints.push(s);var i=(new Error).stack.split("\n");return this.stackDepth=i.length,Agent.isPhone?n.callFrames=this.processCallFramesPhone(String(e),t,r,i):n.callFrames=this.processCallFrames(String(e),t,r,i),this.stickyParams=n,this.sendStickyParams=!0,"(function(){\n          var localObject = {};\n          Agent.getScopeVariables().forEach(function (key) {\n            localObject[key] = (function(){try{return eval(key)}catch(e){return undefined}})();\n          });\n          Agent.inflateStickyParamsObject(localObject);\n          return true;\n        })()"}this.originConsoleAPI.log("[tyro-agent] sticky sendStickyParams step 2"),n=this.stickyParams,this.sendStickyParams=!1}this.originConsoleAPI.log("[tyro-agent] sticky params "+TyroUtil.safeJSONStringify(n));var o=JSON.parse(this.xhrSend(ResponseEvent.Sticky,n));return this.handleSticky(o)}},StickyFinger.prototype.fingerEntry=function(e,t){var r=this.contextMap[e].path,n=this.contextMap[e].function[t],s=this.generateFingerId(),i={time:Date.now(),file:r,line:n.line,name:n.name,id:s,type:FingerType.Entry};return this.fingerCache.push(i),s},StickyFinger.prototype.fingerExit=function(e,t,r){var n=this.contextMap[e].path,s=this.contextMap[e].function[t],i={time:Date.now(),file:n,line:s.line,name:s.name,id:r,type:FingerType.Exit};this.fingerCache.push(i)},StickyFinger.prototype.sendPerf=function(e,t){self.bugmeAPI?self.bugmeAPI.send({method:e,params:t}):self.document?self.document.addEventListener("bugmeInjected",(function(){self.bugmeAPI.send({method:e,params:t})})):self.addEventListener&&self.addEventListener("bugmeInjected",(function(){self.bugmeAPI.send({method:e,params:t})}))},StickyFinger.prototype.consoleAPICalled=function(e,t){var r=this,n=e;return"warn"===e&&(n="warning"),{method:"Runtime.consoleAPICalled",params:{type:n,args:Array.from(t).map((function(t){return r.remoteObjectParser.parseObject(t,e)})),executionContextId:TYRO_EXECUTION_CONTEXT_ID,timestamp:Date.now()}}},StickyFinger.prototype.hookConsole=function(){var e=this,t=this;Object.defineProperties(console,["debug","log","info","warn","error","table"].reduce((function(r,n){var s=console[n].bind(console);return e.originConsoleAPI[n]=s,r[n]={value:function(){var e=arguments;if(e.length){try{var r=/^(\[framework\]|dispatchEvent|onMessage push|unsupported protocol)/;if("string"==typeof e[0]&&r.test(e[0]))return s.apply(null,e);var i=t.consoleAPICalled(n,e).params;i.args.forEach((function(e){"error"===e.subtype&&formatErrorRemoteObject(e)})),t.xhrSend(ResponseEvent.ConsoleAPICalled,i,null,!1)}catch(e){}return s.apply(null,e)}}},r}),{}))},StickyFinger.prototype.inflateStickyParamsObject=function(e){if(0!==this.stickyParams.callFrames.length){var t=this.remoteObjectParser.parseObject(e).objectId;this.stickyParams.callFrames[0].scopeChain.push({type:"local",name:this.stickyParams.callFrames[0].functionName,object:{className:"Object",description:"Object",objectId:t,type:"object"}})}},StickyFinger.prototype.processCallFrames=function(e,t,r,n){var s=this,i=[],o=n.slice(3,n.length).map((function(e){return e.substr(0,e.lastIndexOf(":")).replace("    at ","").replace(" (",":")})),a=0,c=!0;return o.map((function(t){var n=t.split(":"),o=n[0],p=s.contextMap[e].path,u=Number(n[n.length-1]),l=s.contextUrlMap[p]||"none",y=a+":"+u+":"+p;c&&(s.scopeVariables=void 0!==s.contextMap[e]?s.contextMap[e].scope[r]:[],c=!1);var h={callFrameId:y,functionName:o,location:{scriptId:l,lineNumber:u,columnNumber:0},url:p,scopeChain:[],this:{}};i.push(h),a+=1})),i},StickyFinger.prototype.processCallFramesPhone=function(e,t,r,n){var s=this,i=[],o=n.slice(2,n.length).map((function(e){return e.substr(0,e.lastIndexOf(":")).replace("    at ","").replace(" (",":").replace("@",":")})),a=0,c=!0;return o.map((function(n){var o=n.split(":"),p=o[0],u=s.contextMap[e].path,l=Number(o[o.length-1]),y=s.contextUrlMap[u]||"none",h=a+":"+l+":"+u;c&&(s.scopeVariables=void 0!==s.contextMap[e]?s.contextMap[e].scope[r]:[],s.originConsoleAPI.log("scopeVariables "+TyroUtil.safeJSONStringify(s.scopeVariables)),s.originConsoleAPI.log("scopeVariables "+TyroUtil.safeJSONStringify(s.contextMap[e])+" "+s.contextMap[e].scope+" "+r),c=!1);var d={callFrameId:h,functionName:p,location:{scriptId:y,lineNumber:t,columnNumber:0},url:u,scopeChain:[],this:{}};i.push(d),a+=1})),i},StickyFinger.prototype.stickyAsyncLoop=function(){this.xhrSend(ResponseEvent.StickyAsync,{})},StickyFinger.prototype.xhrSendJSAPI=function(e,t,r,n){var s,i=this;if(e===ResponseEvent.Sticky){var o;this.stickyMsgQueue.length>0?(this.stickyMsgQueue.push({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t}),o=TyroUtil.safeJSONStringify(this.stickyMsgQueue),this.stickyMsgQueue=[]):o=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t}),my.call("showRemoteDebugMask",{text:" ",buttonTitle:"断点命中",hide:!1}),this.stickyNotSendPaused=!1;var a=Date.now(),c=my.callSync("tyroRequest",{url:this.host+"/tyro/agent",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","instrument-id":this.instrumentId},data:o,timeout:6e5,blockTimeout:6e5,dataType:"json",requestTaskId:this.requestTaskId++});return my.call("showRemoteDebugMask",{hide:!0}),c.error||null===c?(null===c?this.originConsoleAPI.error("[tyro-agent] xhrSend error result is "+c):this.originConsoleAPI.error("[tyro-agent] xhrSend error "+c.error+" "+c.errorMessage),Date.now()-a>=5e3?this.xhrSendJSAPI(e,t,r,n):TyroUtil.safeJSONStringify({method:"default"})):200!==c.status?(this.originConsoleAPI.error("[tyro-agent] xhrSend status fail "+e+" "+c.status),TyroUtil.safeJSONStringify({method:"default"})):c.data}if(e===ResponseEvent.StickyAsync){var p=TyroUtil.safeJSONStringify({method:ResponseEvent.StickyAsync,params:t});this.originConsoleAPI.info("[tyro-agent] xhrSend async send "+p),my.call(this.asyncRequestMethod,{url:this.host+"/tyro/agent",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","instrument-id":this.instrumentId},data:p,timeout:6e5,dataType:"json",requestTaskId:this.requestTaskId++,success:function(e){i.lastStickyAsyncError=0,i.stickyAsyncLoop(),200===e.status?(i.originConsoleAPI.info("[tyro-agent] xhrSend async success "+e.status+" "+e.data),i.handleStickyAsync(JSON.parse(e.data))):i.originConsoleAPI.error("[tyro-agent] xhrSend async fail "+e.status+" "+e.data)},fail:function(e){i.lastStickyAsyncError>=3?setTimeout((function(){i.stickyAsyncLoop()}),3e3):(i.lastStickyAsyncError+=1,i.stickyAsyncLoop()),i.originConsoleAPI.error("[tyro-agent] xhrSend async error "+TyroUtil.safeJSONStringify(e))}})}switch(e){case ResponseEvent.ById:s={id:r,result:t};break;case ResponseEvent.ScriptSource:s={method:ResponseEvent.ScriptSource,params:t};break;case ResponseEvent.Resumed:s={method:ResponseEvent.Resumed,params:t};break;case ResponseEvent.ConsoleAPICalled:s={method:ResponseEvent.ConsoleAPICalled,params:t};break;default:return}n?this.stickyMsgQueue.push(s):this.wsIsOpen?this.socketTask.send({data:TyroUtil.safeJSONStringify(s)}):this.wsMsgQueue.push(TyroUtil.safeJSONStringify(s))},StickyFinger.prototype.xhrSend=function(e,t,r,n){var s=this;if(Agent.isPhone)return this.xhrSendJSAPI(e,t,r,n);var i,o=new XMLHttpRequest;if(e===ResponseEvent.Sticky){var a;if(o.open("POST",this.host+"/tyro/agent",!1),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),this.stickyMsgQueue.length>0){this.stickyMsgQueue.push({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t});try{a=TyroUtil.safeJSONStringify(this.stickyMsgQueue)}catch(e){this.originConsoleAPI.error(e),a=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t})}finally{this.stickyMsgQueue=[]}}else a=TyroUtil.safeJSONStringify({method:this.stickyNotSendPaused?ResponseEvent.StickyNotSendPaused:ResponseEvent.Sticky,params:t});if(this.stickyNotSendPaused=!1,o.send(a),200===o.status)return o.responseText;throw new Error("[sticky-finger] xhrSend error "+e+" "+o.status)}if(e===ResponseEvent.StickyAsync)return o.open("POST",this.host+"/tyro/agent",!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),o.onload=function(){if(s.lastStickyAsyncError=0,s.stickyAsyncLoop(),4!==o.readyState||200!==o.status)throw new Error("[tyro-agent] xhrSend async fail "+e+" "+o.readyState+" "+o.status);s.handleStickyAsync(JSON.parse(o.responseText))},o.onerror=function(){throw s.lastStickyAsyncError>=3?setTimeout((function(){s.stickyAsyncLoop()}),3e3):(s.lastStickyAsyncError+=1,s.stickyAsyncLoop()),new Error("[tyro-agent] xhrSend async error "+e+" "+o.readyState+" "+o.status)},void o.send(TyroUtil.safeJSONStringify({method:ResponseEvent.StickyAsync,params:t}));switch(o.open("POST",this.host+"/tyro/agent",!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("instrument-id",this.instrumentId),o.onload=function(){if(4!==o.readyState||200!==o.status)throw new Error("[tyro-agent] xhrSend async fail "+e+" "+o.readyState+" "+o.status)},o.onerror=function(){throw new Error("[tyro-agent] xhrSend async error "+e+" "+o.readyState+" "+o.status)},e){case ResponseEvent.ById:i={id:r,result:t};break;case ResponseEvent.ScriptSource:i={method:ResponseEvent.ScriptSource,params:t};break;case ResponseEvent.Resumed:i={method:ResponseEvent.Resumed,params:t};break;case ResponseEvent.ConsoleAPICalled:i={method:ResponseEvent.ConsoleAPICalled,params:t};break;default:return}n?this.stickyMsgQueue.push(i):o.send(TyroUtil.safeJSONStringify(i))},StickyFinger.prototype.handleSticky=function(e){var t=e.id,r=e.method,n=e.params;switch(r){case RequestMethod.DiscardConsoleEntries:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] DiscardConsoleEntries success"),"true";case RequestMethod.CallFunctionOn:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] CallFunctionOn TODO sticky"),"true";case RequestMethod.CompileScript:return this.stickyNotSendPaused=!0,this.originConsoleAPI.log("[tyro-agent] CompileScript success, "+TyroUtil.safeJSONStringify(n)),"true";case RequestMethod.SetBreakpointsActive:return this.stickyNotSendPaused=!0,this.breakpointsActive=n.active,this.originConsoleAPI.log("[tyro-agent] SetBreakpointsActive success, breakpointsActive "+this.breakpointsActive),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetSkipAllPauses:return this.stickyNotSendPaused=!0,this.skipAllPauses=n.skip,this.originConsoleAPI.log("[tyro-agent] SetSkipAllPauses success, skipAllPauses "+this.skipAllPauses),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.Resume:return this.xhrSend(ResponseEvent.Resumed,{}),this.originConsoleAPI.log("[tyro-agent] Resume success"),"false";case RequestMethod.StepInto:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.NextSticky,this.originConsoleAPI.log("[tyro-agent] StepInto success"),"false";case RequestMethod.StepOver:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.StepOver,this.originConsoleAPI.log("[tyro-agent] StepOver success"),"false";case RequestMethod.StepOut:return this.xhrSend(ResponseEvent.Resumed,{}),this.breakStepType=BreakStepType.StepOut,this.originConsoleAPI.log("[tyro-agent] StepOut success"),"false";case RequestMethod.GetPossibleBreakpoints:return this.stickyNotSendPaused=!0,this.getPossibleBreakpoints(t,n,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetBreakpointByUrl:return this.stickyNotSendPaused=!0,this.setBreakpointByUrl(t,n,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetBreakpoint:return this.stickyNotSendPaused=!0,this.setBreakpoint(t,n,!0),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.RemoveBreakpoint:return this.stickyNotSendPaused=!0,this.removeBreakpoint(t,n),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.REPL:return this.stickyNotSendPaused=!0,this.breakStepType=BreakStepType.NextSticky,"(function(){(function(){"+n.statement+"})();return true})()";case RequestMethod.GetVariableValue:this.stickyNotSendPaused=!0;var s=e.params;return this.breakStepType=BreakStepType.NextSticky,"(function(){(function(){\n          Agent.variableValue({"+s.map((function(e){return e+": (function(){try{return "+e+"}catch(e){return undefined}})()"})).join(",")+"})\n        })();return true})()";case RequestMethod.SetPauseOnExceptions:return this.stickyNotSendPaused=!0,this.setPauseOnExceptions(t,n),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.SetAsyncCallStackDepth:return this.stickyNotSendPaused=!0,this.setAsyncCallStackDepth(t,n),this.breakStepType=BreakStepType.NextSticky,"true";case RequestMethod.EvaluateOnCallFrame:return this.stickyNotSendPaused=!0,this.evaluateOnCallFrameExpression=n.expression,this.breakStepType=BreakStepType.NextSticky,"(function(){\n          var tyroRet,tyroErr;\n          try{tyroRet=eval(Agent.getEvaluateOnCallFrameExpression())}\n          catch(e){tyroErr=e}\n          Agent.evaluateOnCallFrame("+t+",tyroRet,tyroErr,"+n.generatePreview+");\n          return true;\n        })()";case RequestMethod.GetProperties:return this.stickyNotSendPaused=!0,this.getProperties(t,n,!0),this.breakStepType=BreakStepType.NextSticky,"true";default:return this.breakStepType=BreakStepType.NextSticky,"true"}},StickyFinger.prototype.handleStickyAsync=function(e){var t=e.id,r=e.method,n=e.params;switch(this.originConsoleAPI.log("[tyro-agent] handleStickyAsync "+t+", "+r+", "+n),r){case RequestMethod.DiscardConsoleEntries:this.originConsoleAPI.log("[tyro-agent] DiscardConsoleEntries success");break;case RequestMethod.Evaluate:this.originConsoleAPI.log("[tyro-agent] Evaluate start, expression "+n.expression);var s=this.evaluate(this.globalExecutionContext,t,n);this.originConsoleAPI.log("[tyro-agent] Evaluate success, expression "+n.expression+", result "+TyroUtil.safeJSONStringify(s));break;case RequestMethod.CallFunctionOn:this.originConsoleAPI.log("[tyro-agent] CallFunctionOn TODO stickyAsync");break;case RequestMethod.CompileScript:this.originConsoleAPI.log("[tyro-agent] CompileScript success, params "+TyroUtil.safeJSONStringify(n));break;case RequestMethod.SetBreakpointsActive:this.breakpointsActive=n.active,this.originConsoleAPI.log("[tyro-agent] SetBreakpointsActive success, breakpointsActive "+this.breakpointsActive);break;case RequestMethod.SetSkipAllPauses:this.skipAllPauses=n.skip,this.originConsoleAPI.log("[tyro-agent] SetSkipAllPauses success, skipAllPauses "+this.skipAllPauses);break;case RequestMethod.Pause:this.breakStepType=BreakStepType.NextSticky,this.originConsoleAPI.log("[tyro-agent] Pause success");break;case RequestMethod.GetPossibleBreakpoints:this.getPossibleBreakpoints(t,n);break;case RequestMethod.SetBreakpointByUrl:this.setBreakpointByUrl(t,n);break;case RequestMethod.SetBreakpoint:this.setBreakpoint(t,n);break;case RequestMethod.RemoveBreakpoint:this.removeBreakpoint(t,n);break;case RequestMethod.SetPauseOnExceptions:this.setPauseOnExceptions(t,n);break;case RequestMethod.SetAsyncCallStackDepth:this.setAsyncCallStackDepth(t,n);break;case RequestMethod.GetProperties:this.getProperties(t,n)}},StickyFinger.prototype.evaluateOnCallFrame=function(e,t,r,n){var s;if(r){var i=this.remoteObjectParser.parseObject(r);formatErrorRemoteObject(i),s={exceptionDetails:{columnNumber:20,exception:i,exceptionId:1,lineNumber:0,text:"Uncaught"},result:i}}else s={result:this.remoteObjectParser.parseObject(t)};return this.xhrSend(ResponseEvent.ById,s,e,!0),s},StickyFinger.prototype.evaluate=function(executionContext,id,params){var returnValue,error,result;try{returnValue=function(expression){return"function"==typeof eval?eval(expression):Agent.evalReference(expression)}.call(executionContext,params.expression)}catch(e){error=e}if(error){var errorRemoteObject=this.remoteObjectParser.parseObject(error);formatErrorRemoteObject(errorRemoteObject),result={exceptionDetails:{columnNumber:20,exception:errorRemoteObject,exceptionId:1,lineNumber:0,text:"Uncaught"},result:errorRemoteObject}}else result={result:this.remoteObjectParser.parseObject(returnValue)};return this.xhrSend(ResponseEvent.ById,result,id),result},StickyFinger.prototype.getPossibleBreakpoints=function(e,t,r){var n=t.scriptId,s=t.startLine,i=t.endLine===t.startLine?t.endLine+1:t.endLine,o={locations:[]};if(this.contextMap[n])for(var a=this.contextMap[n].stickyLine,c=s;c<i;c++)a.includes(c)&&o.locations.push({scriptId:n,lineNumber:c,columnNumber:0});else this.originConsoleAPI.warn("[tyro-agent] getPossibleBreakpoints no scriptId "+n+" in contextMap");this.originConsoleAPI.log("[tyro-agent] getPossibleBreakpoints success, result: "+TyroUtil.safeJSONStringify(o)),this.xhrSend(ResponseEvent.ById,o,e,r)},StickyFinger.prototype.setBreakpointByUrl=function(e,t,r){var n=t.scriptId,s=t.url,i=t.lineNumber;if(this.contextMap[n])if(this.contextMap[n].stickyLine.includes(i)){var o=n+":"+i+":0:"+s,a={breakpointId:o,locations:[{scriptId:n,lineNumber:i,columnNumber:0}]};this.breakpointMap[n][i]=o,this.breakpointIdMap[o]={contextId:n,line:i},this.originConsoleAPI.log("[tyro-agent] setBreakpointByUrl success, scriptId: "+n+", url: "+s+", lineNumber: "+i),this.xhrSend(ResponseEvent.ById,a,e,r)}else this.originConsoleAPI.warn("[tyro-agent] setBreakpointByUrl not sticky line, scriptId: "+n+", url: "+s+", lineNumber: "+i);else this.originConsoleAPI.warn("[tyro-agent] setBreakpointByUrl no contextMap, scriptId: "+n)},StickyFinger.prototype.setBreakpoint=function(e,t,r){var n=t.scriptId,s=t.lineNumber;if(this.contextMap[n])if(this.contextMap[n].stickyLine.includes(s)){var i=n+":"+s+":0",o={breakpointId:i,actualLocation:{scriptId:n,lineNumber:s,columnNumber:0}};this.breakpointMap[n][s]=i,this.breakpointIdMap[i]={contextId:n,line:s},this.originConsoleAPI.log("[tyro-agent] setBreakpoint success, scriptId: "+n+", lineNumber: "+s),this.xhrSend(ResponseEvent.ById,o,e,r)}else this.originConsoleAPI.warn("[tyro-agent] setBreakpoint not sticky line, scriptId: "+n+", lineNumber: "+s);else this.originConsoleAPI.warn("[tyro-agent] setBreakpoint no contextMap, scriptId: "+n)},StickyFinger.prototype.removeBreakpoint=function(e,t){var r=t.breakpointId,n=this.breakpointIdMap[r];n||this.originConsoleAPI.warn("[tyro-agent] removeBreakpoint no breakpointId "+r);var s=n.contextId,i=n.line;delete this.breakpointMap[s][i],this.originConsoleAPI.log("[tyro-agent] removeBreakpoint success, breakpointId: "+r+", scriptId: "+s+", line: "+i)},StickyFinger.prototype.setPauseOnExceptions=function(e,t){t&&["none","uncaught","all"].includes(t.state)?(this.pauseOnExceptions=t.state,this.originConsoleAPI.log("[tyro-agent] setPauseOnExceptions success, pauseOnExceptions state "+this.pauseOnExceptions)):this.originConsoleAPI.warn("[tyro-agent] setPauseOnExceptions state invalid: "+TyroUtil.safeJSONStringify(t))},StickyFinger.prototype.setAsyncCallStackDepth=function(e,t){!t||"number"!=typeof t.maxDepth||t.maxDepth<0?this.originConsoleAPI.warn("[tyro-agent] setAsyncCallStackDepth maxDepth invalid: "+TyroUtil.safeJSONStringify(t)):(this.asyncCallStackDepth=t.maxDepth,this.originConsoleAPI.log("[tyro-agent] setAsyncCallStackDepth success, maxDepth "+this.asyncCallStackDepth))},StickyFinger.prototype.getProperties=function(e,t,r){this.xhrSend(ResponseEvent.ById,this.remoteObjectParser.getProperties(t),e,r)},StickyFinger.prototype.generateFingerId=function(){return this.fingerId+=1,this.fingerId},StickyFinger}(),Agent=function(){function e(t,r){if(e.singleton)return e.singleton;this.host="https://"+getServerConfig().domain,this.stickyFinger=new StickyFinger("undefined"!=typeof window?window:self,this.host,t,r)}return e.getShadowMethod=function(){this.globalReference=self,"function"==typeof eval?this.evalReference=eval:"function"==typeof __eval&&(this.evalReference=__eval)},e.setShadowMethod=function(){this.globalReference.eval=this.evalReference},e.setInstrumentId=function(e){this.instrumentId=e},e.register=function(t,r){if(!e.singleton){if(!this.instrumentId&&"undefined"!=typeof my)try{this.instrumentId=getStartupParams().tyroId}catch(e){}e.instance(this.instrumentId,t)}e.singleton.stickyFinger.register(t,r)},e.sticky=function(t,r,n){return e.singleton.stickyFinger.sticky(t,r,n)},e.getEvaluateOnCallFrameExpression=function(){return e.singleton.stickyFinger.evaluateOnCallFrameExpression},e.evaluateOnCallFrame=function(t,r,n,s){return e.singleton.stickyFinger.evaluateOnCallFrame(t,r,n,s)},e.getScopeVariables=function(){return e.singleton.stickyFinger.scopeVariables},e.inflateStickyParamsObject=function(t){return e.singleton.stickyFinger.inflateStickyParamsObject(t)},e.entry=function(t,r){return e.singleton.stickyFinger.fingerEntry(t,r)},e.exit=function(t,r,n){e.singleton.stickyFinger.fingerExit(t,r,n)},e.instance=function(t,r){e.singleton=new e(t,r)},e.isPhone=!0,e.instrumentId=null,e}();Agent.getShadowMethod();var globalReference="undefined"!=typeof window?window:self;globalReference.Agent||(globalReference.StickyFinger=StickyFinger,globalReference.Agent=Agent)}();

!function(){"use strict";var EWorkerAppEvent,EData,EDataEvent,EStorage,EStorageEvent,EAppLog,EAppLogEvent,RuntimeProtocol,EChromeNetworkProtocol,EBugmePanelId;!function(e){e.PageResume="pageResume",e.PagePause="pagePause",e.DebugPanelClick="tinyRemoteDebugPanelButtonClick",e.DebugConsole="onTinyDebugConsole",e.DebugNetworkRequest="tinyAppRemoteDebug_network_request",e.DebugNetworkResponse="tinyAppRemoteDebug_network_response",e.DebugNetworkError="tinyAppRemoteDebug_network_error",e.DebugStorageChanged="tinyAppRemoteDebug_storage",e.MessageFromVConsole="onMessageFromVConsole"}(EWorkerAppEvent||(EWorkerAppEvent={})),function(e){e.GetPagesData="Tiny.Data.getPageData",e.SetPageData="Tiny.Data.setPageData"}(EData||(EData={})),function(e){e.DataChanged="Tiny.Data.dataChanged"}(EDataEvent||(EDataEvent={})),function(e){e.GetStorageInfo="Tiny.Storage.getStorageInfo",e.ClearStorage="Tiny.Storage.clearStorage",e.RemoveStorage="Tiny.Storage.removeStorage",e.SetStorage="Tiny.Storage.setStorage"}(EStorage||(EStorage={})),function(e){e.StorageChanged="Tiny.Storage.storageChanged"}(EStorageEvent||(EStorageEvent={})),function(e){e.Enable="MiniAppLog.enable"}(EAppLog||(EAppLog={})),function(e){e.ApiSyncCall="MiniAppLog.onApiSyncCall",e.ApiSyncCallback="MiniAppLog.onApiSyncCallback",e.ApiCall="MiniAppLog.onApiCall",e.ApiCallback="MiniAppLog.onApiCallback",e.SetData="MiniAppLog.onSetData",e.SetDataCallback="MiniAppLog.onSetDataCallback",e.ShareAppMessage="MiniAppLog.onShareAppMessage"}(EAppLogEvent||(EAppLogEvent={})),function(e){e.consoleAPICalled="Runtime.consoleAPICalled",e.executionContextDestroyed="Runtime.executionContextDestroyed",e.executionContextsCleared="Runtime.executionContextsCleared",e.executionContextCreated="Runtime.executionContextCreated"}(RuntimeProtocol||(RuntimeProtocol={})),function(e){e.RequestWillBeSent="Network.requestWillBeSent",e.ResponseReceived="Network.responseReceived",e.LoadingFinished="Network.loadingFinished",e.LoadingFailed="Networkw.loadingFailed",e.GetResponseBody="Network.getResponseBody"}(EChromeNetworkProtocol||(EChromeNetworkProtocol={})),function(e){e.Data="data",e.Storage="storage",e.AppLog="applog"}(EBugmePanelId||(EBugmePanelId={}));var counter=Date.now()%1e9;function WeakSet$1(e){this.name="__st"+(1e9*Math.random()>>>0)+counter+++"__",e&&e.forEach&&e.forEach(this.add,this)}var proto=WeakSet$1.prototype;proto.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},proto.delete=function(e){return!!e[this.name]&&(e[this.name]=void 0,!0)},proto.has=function(e){return!!e[this.name]};var weakset=WeakSet$1,workerGlobal=self;function noop(){}var DEBUG_TAG="[DEBUG]";function error(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,[DEBUG_TAG].concat(e))}var debug=noop,originImportScripts=workerGlobal.importScripts,isAppXImportHooked=!1,appxLoadedCallbacks=[];function runAfterAppx(e){void 0!==workerGlobal.AFAppX?e():(appxLoadedCallbacks.push(e),isAppXImportHooked||(isAppXImportHooked=!0,workerGlobal.importScripts=function(e){originImportScripts(e),/af-appx\.worker\.min\.js$/.test(e)&&(appxLoadedCallbacks.forEach((function(e){return e()})),appxLoadedCallbacks=[])}))}function runAfterAppXBridgeReady(e){if("undefined"==typeof AFAppX&&(AFAppX=workerGlobal.AFAppX),"undefined"==typeof $AppxFramework)e();else if(AFAppX.Plugin){var t=AFAppX.Plugin;AFAppX.Plugin=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=n[0];if("object"==typeof r&&r.run){var a=r.run;r.run=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(),a.apply(r,t)}}return t.apply(AFAppX,n)}}else if($AppxFramework.bootstrapInAppContextByProtocol){var n=$AppxFramework.bootstrapInAppContextByProtocol;$AppxFramework.bootstrapInAppContextByProtocol=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var r=t[0];if("object"==typeof r){var a=r.callback;if(a&&(r.callback=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(),a.apply(this,t)}),r.pageInfo){var i=r.pageInfo.init;i&&(r.pageInfo.init=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(),i.apply(this,t)})}}return n.apply($AppxFramework,t)}}}function getStartupParams(){return workerGlobal.__appxStartupParams&&"appId"in workerGlobal.__appxStartupParams?workerGlobal.__appxStartupParams:workerGlobal.AFAppX&&workerGlobal.AFAppX.bridge&&workerGlobal.AFAppX.bridge.callSync&&workerGlobal.AFAppX.bridge.callSync("getStartupParams")||{}}function guardSingleMsgSize(e){var t="string"==typeof e?e:JSON.stringify(e);return t.length>5e6?void debug("abort send websocket message due to size:",t.length):t}function createWeakSet(){return"undefined"==typeof WeakSet?new weakset:new WeakSet}var getCircularReplacer=function(){var e=createWeakSet();return function(t,n){if("object"==typeof n&&null!==n)try{if(e.has(n))return;e.add(n)}catch(e){console.error(e)}return n}};function circularJSONStringify(e){return JSON.stringify(e,getCircularReplacer())}function throttle(e,t,n,o,r){var a,i,s=null,c=0;r||(r={});var p=function(){c=!1===r.leading?0:Date.now(),s=null,i=e.apply(null,a),a=null};return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var g=Date.now();c||!1!==r.leading||(c=g);var d=t-(g-c);return a=u,d<=0||d>t?(o(s),s=null,c=g,i=e.apply(null,a),a=null):s||!1===r.trailing||(s=n(p,d)),i}}var weakElementKey="__weak_set_key__yek_tes_kaew__",weakSetKey=1,WeakSetKlass;function getWeakSetPolyfillConstructor(){return function(){function e(){this.elementKey=weakElementKey+weakSetKey++}return e.prototype.has=function(e){return 1===e[this.elementKey]},e.prototype.add=function(e){return e[this.elementKey]=1,this},e.prototype.delete=function(e){e[this.elementKey]=null},e}()}function getWeakMapConstructorMayBePolyfill(){var e="undefined"!=typeof WeakSet;WeakSetKlass=e?WeakSet:getWeakSetPolyfillConstructor()}function createWeakSet$1(){return WeakSetKlass||getWeakMapConstructorMayBePolyfill(),new WeakSetKlass}var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},InterceptContext=function(){function e(e,t){var n=this;this.interceptors=e,this.callback=t,this.nextRequestId=1e5,this.notifyDataChange=throttle((function(){n.callback({ext:{origin:"data"},method:"Tiny.Data.dataChanged"})}),300,setTimeout,clearTimeout)}return e.prototype.getNextRequestId=function(){return++this.nextRequestId},e}(),getCircularReplacer$1=function(){var e=createWeakSet$1();return function(t,n){if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}};function circularJSONStringify$1(e){return JSON.stringify(e,getCircularReplacer$1())}var precisionTimestampBasis=0;function resetPrecisionTimestampBasis(){precisionTimestampBasis=1e3*Date.now()-getPrecisionTimestamp()}var getPrecisionTimestamp="object"==typeof performance&&performance&&"function"==typeof performance.now?function(){return 1e3*performance.now()+precisionTimestampBasis}:function(){return 1e3*Date.now()};function interceptLifecycle(e){e.interceptors.appLifecycleManagerInterceptor.before("performLifeHook",(function(t,n){var o={aTime:getPrecisionTimestamp()/1e3,args:n,context:circularJSONStringify$1(normalizeAppLifecycleManagerThisContext(t))};onAppLifecycle(e,o)})),e.interceptors.pageLifecycleManagerInterceptor.before("performLifeHook",(function(t,n){var o={aTime:getPrecisionTimestamp()/1e3,args:n,context:circularJSONStringify$1(normalizePageLifecycleManagerThisContext(t))};onPageLifecycle(e,o)}))}function onAppLifecycle(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog."+t.args[0],params:t};e.callback(n)}catch(e){}}function normalizeAppLifecycleManagerThisContext(e){var t=e.app;return{app:{appInstanceId:t.appInstanceId,initTime:t.initTime,launchOptions:t.getLaunchOptions(),launchTime:t.launchTime},state:e.state}}function onPageLifecycle(e,t){try{var n=getLifecycleName(t.args[0]);if(!n)return;var o={ext:{origin:"applog"},method:"MiniAppLog."+n,params:t};e.callback(o),"onPageShow"===n&&e.notifyDataChange()}catch(e){}}function getLifecycleName(e){var t;switch(e){case 0:t="onPageLoad";break;case 2:t="onPageReady";break;case 1:t="onPageShow";break;case 3:t="onPageHide";break;case 4:t="onPageUnload"}return t}function normalizePageLifecycleManagerThisContext(e){var t=e.page;return{page:{initTime:t.initTime,loadTime:t.loadTime,pageId:t.pageId,pagePath:t.pagePath,plugin:t.plugin},state:e.state}}function interceptJSAPI(e){e.interceptors.bridgeSyncCallContextMethodInterceptor.all("invoke",(function(t,n){var o=e.getNextRequestId(),r=getPrecisionTimestamp()/1e3;return onApiSyncCall(e,{context:t,args:n,reqId:o,aTime:r}),[[o,r],n]}),(function(t,n,o,r){var a=n[0],i=a[0],s=a[1],c=n[1],p=getPrecisionTimestamp()/1e3;onApiSyncCallback(e,{context:t,args:c,reqId:i,result:o,bTime:p,aTime:s})})),e.interceptors.bridgeAsyncCallContextMethodInterceptor.before("invoke",(function(t,n){var o=e.getNextRequestId(),r=getPrecisionTimestamp()/1e3;return t.__reqId=o,onApiCall(e,{context:t,args:n,reqId:o,aTime:r}),"rpc"===t.apiName&&(t.option.getResponse||(t.$$rpcGetResponseToTrue=!0,t.option=__assign(__assign({},t.option),{getResponse:!0}))),n})),e.interceptors.bridgeAsyncCallContextMethodInterceptor.before("dispatchResultCallback",(function(t,n){var o=t.__reqId,r=getPrecisionTimestamp()/1e3;return onApiCallback(e,{context:t,args:n,reqId:o,bTime:r}),"rpc"===t.apiName&&t.$$rpcGetResponseToTrue&&void 0!==n[0].resData?[n[0].resData]:n}))}function onApiSyncCallback(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onApiSyncCallback",params:minimizeApiHookInfo(t)};e.callback(n)}catch(e){}}function onApiSyncCall(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onApiSyncCall",params:minimizeApiHookInfo(t)};e.callback(n)}catch(e){}}function onApiCall(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onApiCall",params:minimizeApiHookInfo(t)};e.callback(n)}catch(e){}}function onApiCallback(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onApiCallback",params:minimizeApiHookInfo(t)};e.callback(n)}catch(e){}}function minimizeApiHookInfo(e){if(e.context){var t=e.context,n=t.apiName,o=t.extraInfo,r=t.isMiniExtension,a=t.option,i=t.startTime,s=t.taskId,c=t.__reqId;return __assign(__assign({},e),{context:{__reqId:c,apiName:n,extraInfo:o,isMiniExtension:r,option:a,startTime:i,taskId:s}})}return e}var originalError=console.error;function interceptError(e){e.interceptors.appBaseInstanceInterceptor.after("reportError",(function(e,t){t[0];onError({code:t[1],formatted:t[2]})}))}function onError(e){var t=new Error(e.formatted.message);t.stack=e.formatted.stack,setTimeout(originalError.bind(console,t),0)}function interceptSetData(e){e.interceptors.pageFlexibleLogicInstanceMethodInterceptor.all("setData",(function(t,n){var o=e.getNextRequestId(),r=getPrecisionTimestamp()/1e3,a={aTime:r,args:n,context:circularJSONStringify$1(normalizePageLogicInstanceThisContext(t)),reqId:o};return onSetData(e,a),[[o,r],n]}),(function(t,n,o,r){var a=n[0],i=a[0],s=a[1],c=n[1],p=getPrecisionTimestamp()/1e3;onSetDataCallback(e,{aTime:s,args:c,bTime:p,context:circularJSONStringify$1(normalizePageLogicInstanceThisContext(t)),reqId:i})})),e.interceptors.componentFlexibleLogicInstanceMethodInterceptor.all("setData",(function(t,n){var o=e.getNextRequestId(),r=getPrecisionTimestamp()/1e3;return onSetData(e,{aTime:r,args:n,context:circularJSONStringify$1(normalizeComponentLogicInstanceThisContext(t)),reqId:o}),[[o,r],n]}),(function(t,n,o,r){var a=n[0],i=a[0],s=a[1],c=n[1],p=getPrecisionTimestamp()/1e3;onSetDataCallback(e,{aTime:s,args:c,bTime:p,context:circularJSONStringify$1(normalizeComponentLogicInstanceThisContext(t)),reqId:i})}))}function onSetData(e,t){try{e.notifyDataChange();var n={ext:{origin:"applog"},method:"MiniAppLog.onSetData",params:minimizeSetDataInfo(t)};e.callback(n)}catch(e){}}function onSetDataCallback(e,t){try{var n={ext:{origin:"applog"},method:"MiniAppLog.onSetDataCallback",params:t};e.callback(n)}catch(e){}}function minimizeSetDataInfo(e){return e.context?e:{componentIs:e.component?e.component.is:void 0,isPage:e.isPage,option:e.options,pagePath:e.isPage?e.page.route:e.component.$page.route}}function normalizePageLogicInstanceThisContext(e){var t=e.page;return{page:{appInstanceId:t.appInstanceId,initTime:t.initTime,loadTime:t.loadTime},pageId:e.pageId,pagePath:e.pagePath}}function normalizeComponentLogicInstanceThisContext(e){var t=e.page;return{componentPath:e.componentPath,page:{appInstanceId:t.appInstanceId,initTime:t.initTime,loadTime:t.loadTime},pageId:t.pageId,pagePath:t.pagePath}}function setup(e,t,n){resetPrecisionTimestampBasis();var o=new InterceptContext(t,n);interceptSetData(o),interceptLifecycle(o),interceptJSAPI(o),interceptError(o)}var AgentContext=function(){this.channelConfigKey="0",this.silentMode=!1,this.userAgent="undefined"!=typeof navigator?navigator.swuserAgent||navigator.userAgent:"",this.isIOS=/iPhone|iPad|iOS/i.test(this.userAgent),this.isLyra=/LyraVM/i.test(this.userAgent),this.startupParams=getStartupParams(),this.channelId=this.startupParams.channelId,this.isLyra&&(this.silentMode=!0),this.startupParams.remoteCh&&(this.channelConfigKey=String(this.startupParams.remoteCh))},NetworkCollection=function(){function e(){this.records=new Map}return e.prototype.setRequest=function(e,t){this.records.set(e,__assign(__assign({},this.records.get(e)||{}),t))},e.prototype.getRequest=function(e){return this.records.get(e)},e.prototype.removeRequest=function(e){this.records.has(e)&&this.records.delete(e)},e}();function createProtocol4RequestWillBeSent(e){var t=(e.method||"GET").toUpperCase(),n=mapValueToString(e.headers),o=getTimestamp();return{method:EChromeNetworkProtocol.RequestWillBeSent,params:{documentURL:"",loaderId:"",requestId:e.requestId,request:{method:t,url:e.url,headers:n,postData:e.postBody,mixedContentType:"none",initialPriority:"High",isLinkPreload:!1,referrerPolicy:"origin"},wallTime:o,initiator:{type:"script"},timestamp:o,type:"XHR"}}}function createProtocol4ResponseReceived(e,t){var n=e.profile,o=e.headers,r=getTimestamp(),a=r-(n?n.totalTime-n.Waiting-n.domainLookup-n.connect-n.SSLconnection:0)/1e3;return{method:EChromeNetworkProtocol.ResponseReceived,params:{requestId:e.requestId,loaderId:"",type:"XHR",timestamp:a,response:{url:t.url||"",status:Number(e.status),headers:mapValueToString(o),requestHeaders:t.requestHeaders,connectionReused:!1,connectionId:1e3,encodedDataLength:0,securityState:"unknown",statusText:"",protocol:"",mimeType:o["Content-Type"]||o["content-type"],timing:n?createResourceTiming(n,r-n.totalTime/1e3):void 0}}}}function createProtocol4LoadingFinished(e){return{method:EChromeNetworkProtocol.LoadingFinished,params:{requestId:e.requestId,timestamp:getTimestamp(),encodedDataLength:0}}}function createProtocol4LoadingFailed(e){return{method:EChromeNetworkProtocol.LoadingFailed,params:{canceled:!1,errorText:e.errorMsg||"",requestId:e.requestId,timestamp:getTimestamp(),type:"XHR"}}}function mapValueToString(e){if(!e||"object"!=typeof e)return{};var t={};return Object.keys(e).forEach((function(n){t[n]=""+e[n]})),t}function getTimestamp(){return Date.now()/1e3}function createResourceTiming(e,t){var n=e.domainLookup,o=e.connect,r=e.SSLconnection,a=n+o+r;return{requestTime:t,proxyStart:-1,proxyEnd:-1,dnsStart:n?1e-5:0,dnsEnd:n,connectStart:n,connectEnd:a,sslStart:a-r,sslEnd:a,workerStart:-1,workerReady:-1,sendStart:-1,sendEnd:-1,pushStart:0,pushEnd:0,workerFetchStart:-1,workerRespondWithSettled:-1,receiveHeadersEnd:a+e.Waiting}}var MAX_QUEUE_SIZE=1e8,MessageQueue=function(){function e(e){void 0===e&&(e=[]),this._messageQueue=e,this._queueSize=0,this.isApplogEnabled=!1}return e.prototype.push=function(e){this._queueSize;var t=guardSingleMsgSize(e);null!=t&&(this._messageQueue.push(t),this._queueSize+=t.length)},e.prototype.sendQueuedMessages=function(){if(0!==this._messageQueue.length){var e=getInjector().getWorkerSocket();e&&(this._messageQueue.forEach((function(t){return e.send(t)})),this._messageQueue=[],this._queueSize=0)}},e.prototype.setApplogEnabled=function(e){this.isApplogEnabled=e},e}(),globalInjector,Injector=function(){function e(){}return e.prototype.getAgentContext=function(){return this.agentContext||(this.agentContext=new AgentContext),this.agentContext},e.prototype.setWorkerSocket=function(e){this.workerSocket=e},e.prototype.getWorkerSocket=function(){return this.workerSocket},e.prototype.getNetworkRecorder=function(){return this.networkRecorder||(this.networkRecorder=new NetworkCollection),this.networkRecorder},e.prototype.getMessageQueue=function(){return null==this.messageQueue&&(this.messageQueue=new MessageQueue),this.messageQueue},e.prototype.setRuntime=function(e){this.runtime=e},e.prototype.getRuntime=function(){return this.runtime},e}();function getInjector(){return globalInjector||(globalInjector=new Injector),globalInjector}function sendOrQueueApplogMsg(e){try{var t=getInjector().getWorkerSocket(),n=getInjector().getMessageQueue();t&&n.isApplogEnabled?t.send(circularJSONStringify(e)):n.push(circularJSONStringify(e))}catch(e){}}function getHookFn(e){if(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__[e])return workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]}var channelDomainConfig={0:{openchannel:"openchannel.alipay.com",hpmweb:"hpmweb.alipay.com"},1:{openchannel:"miniprogram.alipay.com",hpmweb:"hpmweb.alipay.com"},2:{openchannel:"openchannel-pre.alipay.com",hpmweb:"hpmweb-pre.alipay.com"}};function throttle$1(e,t,n,o,r){var a,i,s=null,c=0;r||(r={});var p=function(){c=!1===r.leading?0:Date.now(),s=null,i=e.apply(null,a),a=null};return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var g=Date.now();c||!1!==r.leading||(c=g);var d=t-(g-c);return a=u,d<=0||d>t?(o(s),s=null,c=g,i=e.apply(null,a),a=null):s||!1===r.trailing||(s=n(p,d)),i}}function debounce(e,t,n,o){var r;return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];o(r),r=n((function(){e.apply(null,a)}),t)}}function compareVersion(e,t){if(e&&t){for(var n=stringToIntArraySplitBy(e,"."),o=stringToIntArraySplitBy(t,"."),r=0,a=0,i=void 0,s=void 0;a<n.length;a++){if((i=o[a]||0)>(s=n[a]||0)){r=-1;break}if(i<s){r=1;break}}return r}return 0}function stringToIntArraySplitBy(e,t){for(var n=[],o=0,r=e.split(t);o<r.length;o++){var a=r[o];n.push(parseInt(a,10))}return n}var WebSocketBaseImpl=function(){function e(e){this.url="",this.opened=!1,e&&(this.url=e),this.onSocketError=this.onSocketError.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),this.onSocketOpen=this.onSocketOpen.bind(this)}return Object.defineProperty(e.prototype,"isSocketOpened",{get:function(){return this.opened},enumerable:!1,configurable:!0}),e.prototype.setUrl=function(e){this.url=e},e}(),internalWebSocket;"undefined"!=typeof WebSocket&&WebSocket.OPEN&&(internalWebSocket=WebSocket);var WebSocketBrowserImpl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageBeforeSocketOpen=[],t}return __extends(t,e),t.prototype.open=function(){var e=this;if(!this.url)throw new Error("WebSocket url required");this.socket=new internalWebSocket(this.url),this.socket.onopen=this.onSocketOpen,this.socket.onmessage=function(t){"string"==typeof t.data?e.onSocketMessage(t.data):console.warn("[DEBUG] invalid message",t.data)},this.socket.onclose=this.onSocketClose,this.socket.onerror=this.onSocketError},t.prototype.close=function(){this.socket&&this.socket.close()},t.prototype.sendSocketMessage=function(e){var t="string"==typeof e?e:JSON.stringify(e);t.length>5e6||(this.opened?this.socket.send(t):this.messageBeforeSocketOpen.push(t))},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){var e=this;this.opened=!0,this.messageBeforeSocketOpen.length&&(this.messageBeforeSocketOpen.forEach((function(t){e.sendSocketMessage(t)})),this.messageBeforeSocketOpen=[])},t.prototype.onSocketClose=function(){this.opened=!1,console.log("[DEBUG] connection closed")},t.prototype.onSocketError=function(e){console.error("[DEBUG] connection onerror",e)},t}(WebSocketBaseImpl);function getUserAgent(){return"undefined"!=typeof navigator&&(navigator.swuserAgent||navigator.userAgent)||""}function getAriverVersion(e){var t=e.match(/Ariver\/(\d+\.\d+\.\d+)/);if(t)return t[1]}var WebSocketNativeImpl=function(e){function t(t){var n=e.call(this,t)||this;n.messageBeforeSocketOpen=[],n.useFromRemoteDebugFlag=!1;var o=getAriverVersion(getUserAgent());return o&&compareVersion(o,"1.1.0")>=0&&(n.useFromRemoteDebugFlag=!0),n}return __extends(t,e),t.prototype.open=function(){var e=this;this.socketTask=AFAppX.bridge.connectSocket({fromRemoteDebug:this.useFromRemoteDebugFlag,url:this.url,multiple:!0,fail:function(t){e.onSocketError(t)}}),this.socketTask.onOpen((function(){e.handleSocketOpen()})),this.socketTask.onError((function(t){e.onSocketError(t.data)})),this.socketTask.onClose((function(){e.opened=!1,e.onSocketClose()})),this.socketTask.onMessage((function(t){e.opened||e.handleSocketOpen(),e.onSocketMessage(t.data.data)}))},t.prototype.sendSocketMessage=function(e){var t="string"==typeof e?e:JSON.stringify(e);t.length>5e6||(this.opened?this.socketTask.send({fromRemoteDebug:this.useFromRemoteDebugFlag,data:t,isBuffer:!1}):this.messageBeforeSocketOpen.push(t))},t.prototype.close=function(){this.opened&&this.socketTask.close({fromRemoteDebug:this.useFromRemoteDebugFlag})},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){},t.prototype.onSocketError=function(e){},t.prototype.onSocketClose=function(){},t.prototype.handleSocketOpen=function(){var e=this;this.opened||(this.opened=!0,this.messageBeforeSocketOpen.length&&(this.messageBeforeSocketOpen.forEach((function(t){e.sendSocketMessage(t)})),this.messageBeforeSocketOpen=[]),this.onSocketOpen())},t}(WebSocketBaseImpl),throttledEmitDataChangedEvent=throttle$1((function(){var e=getInjector().getWorkerSocket();e&&e.send({method:EDataEvent.DataChanged,ext:{origin:EBugmePanelId.Data}})}),300,setTimeout,clearTimeout,{leading:!1});function getFn(e){if(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__&&workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]&&"function"==typeof workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__[e])return workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__[e]}function onErrorHook(e){var t=new Error(e.formatted.message);t.stack=e.formatted.stack,setTimeout(console.error.bind(console,t))}function registerLegacyAppxHook(){null==workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__&&(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__={});var e={onSetData:getFn("onSetData"),onSetDataCallback:getFn("onSetDataCallback"),onApiSyncCall:getFn("onApiSyncCall"),onApiSyncCallback:getFn("onApiSyncCallback"),onApiCall:getFn("onApiCall"),onApiCallback:getFn("onApiCallback"),onError:getFn("onError")};workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetData=function(t){try{if(e.onSetData)try{e.onSetData.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){debug(e)}throttledEmitDataChangedEvent(),sendOrQueueApplogMsg$1({method:EAppLogEvent.SetData,params:minimizeSetDataInfo$1(t),ext:{origin:EBugmePanelId.AppLog}})}catch(e){}},workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__.onSetDataCallback=function(t){try{if(e.onSetDataCallback)try{e.onSetDataCallback.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){debug(e)}sendOrQueueApplogMsg$1({method:EAppLogEvent.SetDataCallback,params:t,ext:{origin:EBugmePanelId.AppLog}})}catch(e){}},workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCall=function(t){try{if(e.onApiSyncCall)try{e.onApiSyncCall.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){debug(e)}sendOrQueueApplogMsg$1({method:EAppLogEvent.ApiSyncCall,params:minimizeApiHookInfo$1(t),ext:{origin:EBugmePanelId.AppLog}})}catch(e){}},workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiSyncCallback=function(t){try{if(e.onApiSyncCallback)try{e.onApiSyncCallback.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){debug(e)}sendOrQueueApplogMsg$1({method:EAppLogEvent.ApiSyncCallback,params:minimizeApiHookInfo$1(t),ext:{origin:EBugmePanelId.AppLog}})}catch(e){}},workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCall=function(t){try{if(e.onApiCall)try{e.onApiCall.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){debug(e)}sendOrQueueApplogMsg$1({method:EAppLogEvent.ApiCall,params:minimizeApiHookInfo$1(t),ext:{origin:EBugmePanelId.AppLog}})}catch(e){}},workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__.onApiCallback=function(t){try{if(e.onApiCallback)try{e.onApiCallback.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){debug(e)}sendOrQueueApplogMsg$1({method:EAppLogEvent.ApiCallback,params:minimizeApiHookInfo$1(t),ext:{origin:EBugmePanelId.AppLog}})}catch(e){}},workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__.onError=function(t){try{if(e.onError)try{e.onError.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,t)}catch(e){}onErrorHook(t)}catch(e){}},registerV1PageLifecycleHooks(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),registerV2PageLifecycleHooks(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),registerV1AppLifecycleHooks(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,e),registerV2AppLifecycleHooks(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}function getLifecycleName$1(e){var t;switch(e){case 0:t="onPageLoad";break;case 2:t="onPageReady";break;case 1:t="onPageShow";break;case 3:t="onPageHide";break;case 4:t="onPageUnload"}return t}function registerV1PageLifecycleHooks(e,t){for(var n=["onPageLoad","onPageShow","onPageHide","onPageReady","onPageUnload","onPageUpdate"],o=0,r=n;o<r.length;o++){t[c=r[o]]=getFn(c)}for(var a=function(n){e[n]=function(e){try{if(t[n])try{t[n].call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){debug(e)}var o=e.context?e:__assign({route:e.page.route},e);sendOrQueueApplogMsg$1({method:"MiniAppLog."+n,params:minimizePageLifecycleInfo1(o),ext:{origin:EBugmePanelId.AppLog}}),"onPageShow"===n&&throttledEmitDataChangedEvent()}catch(e){}}},i=0,s=n;i<s.length;i++){var c;a(c=s[i])}}function registerV2PageLifecycleHooks(e,t){t.onPageLifecycle=getFn("onPageLifecycle"),e.onPageLifecycle=function(e){try{if(t.onPageLifecycle)try{t.onPageLifecycle.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){debug(e)}var n=getLifecycleName$1(e.args[0]);if(!n)return;sendOrQueueApplogMsg$1({method:"MiniAppLog."+n,params:e,ext:{origin:EBugmePanelId.AppLog}}),"onPageShow"===n&&throttledEmitDataChangedEvent()}catch(e){}}}function registerV1AppLifecycleHooks(e,t){for(var n=["onAppLaunch","onAppShow","onAppHide","onAppError","onAppUnhandledRejection"],o=0,r=n;o<r.length;o++){t[c=r[o]]=getFn(c)}for(var a=function(n){e[n]=function(e){try{if(t[n])try{t[n].call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){debug(e)}sendOrQueueApplogMsg$1({method:"MiniAppLog."+n,params:e,ext:{origin:EBugmePanelId.AppLog}})}catch(e){}}},i=0,s=n;i<s.length;i++){var c;a(c=s[i])}}function registerV2AppLifecycleHooks(e,t){t.onAppLifecycle=getFn("onAppLifecycle"),e.onAppLifecycle=function(e){try{if(t.onAppLifecycle)try{t.onAppLifecycle.call(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__,e)}catch(e){debug(e)}sendOrQueueApplogMsg$1({method:"MiniAppLog."+e.args[0],params:e,ext:{origin:EBugmePanelId.AppLog}})}catch(e){}}}function sendOrQueueApplogMsg$1(e){try{var t=getInjector().getWorkerSocket(),n=getInjector().getMessageQueue();t&&n.isApplogEnabled?t.send(circularJSONStringify(e)):n.push(circularJSONStringify(e))}catch(e){}}function minimizeApiHookInfo$1(e){if(e.context){var t=e.context;return __assign(__assign({},e),{context:pick(t,["apiName","extraInfo","isMiniExtension","option","startTime","taskId","__reqId"])})}return e}function minimizeSetDataInfo$1(e){return e.context?e:{pagePath:e.isPage?e.page.route:e.component.$page.route,isPage:e.isPage,option:e.options,componentIs:e.component?e.component.is:void 0}}function minimizePageLifecycleInfo1(e){return __assign(__assign({},e),{page:pick(e.page,["$id","$page","$viewId","data"])})}function pick(e,t){var n={};return t.forEach((function(t){n[t]=e[t]})),n}function registerAppxHook(){null==workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__&&(workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__={}),registerLegacyAppxHook();var e=getHookFn("setup");workerGlobal.__APPX_DEVTOOLS_GLOBAL_HOOK__.setup=function(t,n){if(e&&"function"==typeof e)try{e(t,n)}catch(e){}getInjector().setRuntime(t),setup(t,n,(function(e){if("string"==typeof e.method&&e.method.includes("MiniAppLog"))sendOrQueueApplogMsg(e);else{var t=getInjector().getWorkerSocket();t&&t.send(e)}}))}}function getObjectOwnPropertyDescriptors(e){return Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors(e):Object.getOwnPropertyNames(e).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t}),Object.create(null))}function isError(e){return"[object Error]"===Object.prototype.toString.call(e)||e instanceof Error}function isDate(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)||e instanceof RegExp}function isPromise(e){return"[object Promise]"===Object.prototype.toString.call(e)||e instanceof Promise}var ObjectMapper=function(){function e(e){this.objectStore=e}return e.prototype.mapFrom=function(e,t){var n=this;return Array.from(e).map((function(e){return n.mapFromOne(e,t)}))},e.prototype.mapFromOne=function(e,t){switch(typeof e){case"string":return this.mapString(e);case"number":return this.mapNumber(e);case"object":return Array.isArray(e)?this.mapArray(e,"table"===t):null===e?this.mapNull():this.mapObject(e,"table"===t);case"function":return this.mapFunction(e);case"undefined":return this.mapUndef();case"boolean":return this.mapBoolean(e);default:return{type:typeof e,value:e}}},e.prototype.mapString=function(e){return{type:"string",value:e}},e.prototype.mapNumber=function(e){return{type:"number",value:e,description:String(e)}},e.prototype.mapBoolean=function(e){return{type:"boolean",value:e}},e.prototype.mapFunction=function(e){var t=this.objectStore.save(e);return{type:"function",className:"Function",description:e.toString(),objectId:t}},e.prototype.mapUndef=function(){return{type:"undefined"}},e.prototype.mapNull=function(){return{type:"object",subtype:"null",value:null}},e.prototype.mapObject=function(e,t){var n,o,r=this,a=getObjectOwnPropertyDescriptors(e),i=Object.keys(a),s=this.objectStore.save(e),c=e.constructor?e.constructor.name:"Object",p=i.length>5&&!t,u={type:"object",className:c,description:c,objectId:s,preview:{type:"object",description:c,overflow:p,properties:(p?i.slice(0,5):i).map((function(e){return r.getPropertyPreview4ObjectProperty(e,a[e],t)})).filter(Boolean)}};return isError(e)?(n="error",-1===(o=e.stack||"").indexOf(e.name)&&(o=e.toString()+"\n"+o)):isDate(e)?(n="date",o=e.toString()):isRegExp(e)?(n="regexp",o=e.toString()):isPromise(e)&&(n="promise",o="Promise"),n&&(u.subtype=n,u.preview&&(u.preview.subtype=n)),o&&(u.description=o,u.preview&&(u.preview.description=o)),u},e.prototype.mapArray=function(e,t){var n=this,o=e.length>100&&!t,r="Array("+e.length+")";return{type:"object",subtype:"array",className:"Array",description:r,objectId:this.objectStore.save(e),preview:{type:"object",subtype:"array",description:r,overflow:o,properties:(o?e.slice(0,100):e).map((function(e,o){return n.getPropertyPreview4ArrayProperty(o,e,t)}))}}},e.prototype.getPropertyPreview4ArrayProperty=function(e,t,n){return this.getPropertyPreview4AnyValue(String(e),t,n)},e.prototype.getPropertyPreview4ObjectProperty=function(e,t,n){return t.get?{name:e,type:"accessor"}:t.set?void 0:this.getPropertyPreview4AnyValue(e,t.value,n)},e.prototype.getPropertyPreview4AnyValue=function(e,t,n){switch(void 0===n&&(n=!1),typeof t){case"object":if(Array.isArray(t)){var o={name:e,type:"object",subtype:"array",value:"Array("+t.length+")"};return n&&(o.valuePreview=this.getValuePreview4TableArray(t)),o}if(null===t)return{name:e,type:"object",subtype:"null",value:"null"};o={name:e,type:"object",value:t.constructor?t.constructor.name:"Object"};return n&&(o.valuePreview=this.getValuePreview4TableObject(t)),o;case"function":return{type:"function",value:"",name:e};default:return{name:e,type:typeof t,value:String(t)}}},e.prototype.getValuePreview4TableArray=function(e){var t=this;return{type:"object",subtype:"array",description:"Array("+e.length+")",overflow:!1,properties:e.map((function(e,n){return t.getPropertyPreview4AnyValue(String(n),e)}))}},e.prototype.getValuePreview4TableObject=function(e){var t=this;return{type:"object",description:"Object",overflow:!1,properties:Object.keys(e).map((function(n){return t.getPropertyPreview4AnyValue(n,e[n])}))}},e}(),ExtractStackLine=function(){function e(){this.e1=/\s*at\s(\S+)\s(\S+)\:(\d+)\:(\d+)\)/,this.e2=/\s*at\s(\S+)\:(\d+)\:(\d+)/}return e.prototype.testType1=function(e){return this.e1.test(e)},e.prototype.testType2=function(e){return this.e2.test(e)},e.prototype.extractType1=function(e){var t=e.match(this.e1);return null==t?null:{functionName:t[1],url:t[2].slice(1),lineNumber:Number(t[3]),columnNumber:Number(t[4])}},e.prototype.extractType2=function(e){var t=e.match(this.e2);return null==t?null:{functionName:"",url:t[1].slice(1),lineNumber:Number(t[2]),columnNumber:Number(t[3])}},e}(),CallFramesMapper=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.mapFrom=function(e){var t=this;return e.split("\n").slice(2).map((function(e,n){return t.testType1(e)?t.extractType1(e):t.testType2(e)?t.extractType2(e):void 0})).filter((function(e){return null!=e}))},t}(ExtractStackLine),executionContextId=1,injectedScriptId=1,ObjectStore=function(){function e(){this.id=0,this.id2Object=new Map,this.object2Id=new Map}return e.prototype.save=function(e){if(this.object2Id.has(e))return this.object2Id.get(e);var t=this.getNextObjectId();return this.id2Object.set(t,e),this.object2Id.set(e,t),t},e.prototype.query=function(e){return this.id2Object.get(e)},e.prototype.clear=function(e){var t=this.id2Object.get(e);t&&(this.id2Object.delete(e),this.object2Id.delete(t))},e.prototype.clearAll=function(){this.id2Object.clear(),this.object2Id.clear()},e.prototype.getNextObjectId=function(){return this.id++,'{"injectedScriptId":'+injectedScriptId+',"id":'+this.id+"}"},e}(),GetPropertiesHandler=function(){function e(e,t){this.objectStore=e,this.objectMapper=t}return e.prototype.handle=function(e){var t=this.objectStore.query(e.objectId);return t?{result:this.mapObject(t,Boolean(e.ownProperties),Boolean(e.accessorPropertiesOnly))}:{result:[]}},e.prototype.mapObject=function(e,t,n){var o=this;if(t){var r=getObjectOwnPropertyDescriptors(e),a=Object.keys(r).filter((function(e){return!(n&&!r[e].get&&!r[e].set)})).map((function(e){return o.mapResultOne(e,r[e],!0)}));return e.__proto__&&a.push(this.mapResultOne("__proto__",{configurable:!0,enumerable:!1,writable:!0,value:e.__proto__},!0)),a}for(var i=[],s={},c=e,p=!1,u=!0,l=function(){var e=getObjectOwnPropertyDescriptors(c);if(Object.keys(e).forEach((function(t){if(!s[t]){s[t]=!0;var r=e[t];(!n||r.get||r.set)&&i.push(o.mapResultOne(t,r,u))}})),!p){var t=Object.getOwnPropertyDescriptor(c,"__proto__");t&&(p=!0,i.push(g.mapResultOne("__proto__",t,u)))}c=c.__proto__,u=!1},g=this;c;)l();return i},e.prototype.mapResultOne=function(e,t,n){var o={writable:t.writable,configurable:Boolean(t.configurable),enumerable:Boolean(t.enumerable),isOwn:n,name:String(e)};return"value"in t&&(o.value=this.objectMapper.mapFromOne(t.value)),t.get&&(o.get=this.objectMapper.mapFromOne(t.get)),t.set&&(o.set=this.objectMapper.mapFromOne(t.set)),o},e}(),RemoteObjectParser=function(){function e(){this.objectStore=new ObjectStore,this.objectMapper=new ObjectMapper(this.objectStore),this.callFramesMapper=new CallFramesMapper,this.getPropertiesHandler=new GetPropertiesHandler(this.objectStore,this.objectMapper)}return e.prototype.parseObject=function(e,t){return this.objectMapper.mapFromOne(e,t)},e.prototype.getProperties=function(e){return this.getPropertiesHandler.handle(e)},e.prototype.getObjectById=function(e){return this.objectStore.query(e)},e.prototype.consoleAPICalled=function(e,t,n){var o=e;return"warn"===e&&(o="warning"),{method:"Runtime.consoleAPICalled",params:{type:o,args:this.objectMapper.mapFrom(n,e),executionContextId:executionContextId,timestamp:Date.now(),stackTrace:{callFrames:this.callFramesMapper.mapFrom(t)}}}},e}(),globalConsoleOverrider;function initConsoleOverrider(){"boolean"==typeof __BUGME_CONSOLE_ENABLE__&&__BUGME_CONSOLE_ENABLE__&&(globalConsoleOverrider=new ConsoleOverrider).overrideConsole()}function getConsoleOverrider(){return globalConsoleOverrider}var ConsoleOverrider=function(){function e(){this.executionContextId=1,this.messageBeforeAgentInit=[],this.webSocketCheckingLoop=!1,this.parser=new RemoteObjectParser,this.createExecutionContext()}return e.prototype.createExecutionContext=function(){this.sendMesasge({method:RuntimeProtocol.executionContextsCleared,params:{}}),this.sendMesasge({method:RuntimeProtocol.executionContextCreated,params:{context:{id:this.executionContextId,origin:"app://",name:"app"}}})},e.prototype.overrideConsole=function(){var e=this;Object.defineProperties(console,["debug","log","info","warn","error","table"].reduce((function(t,n){var o=console[n].bind(console);return t[n]={value:function(){var t=arguments;if(t.length){try{var r=/^(\[framework\]|dispatchEvent|onMessage push|unsupported protocol)/;if("string"==typeof t[0]&&r.test(t[0]))return o.apply(null,t);var a=new Error;a.stack&&e.sendMesasge(e.parser.consoleAPICalled(n,a.stack,t))}catch(e){}return o.apply(null,t)}}},t}),{}))},e.prototype.sendMesasge=function(e){var t=getInjector().getWorkerSocket();t?(this.flushPendingMessasges(),t.sendAfterReceivingMessage(e)):(this.messageBeforeAgentInit.push(e),this.checkWebSocketReady())},e.prototype.flushPendingMessasges=function(){if(this.messageBeforeAgentInit.length){var e=getInjector().getWorkerSocket();e&&(this.messageBeforeAgentInit.forEach((function(t){e.sendAfterReceivingMessage(t)})),this.messageBeforeAgentInit=[])}},e.prototype.checkWebSocketReady=function(){var e=this;if(!this.webSocketCheckingLoop){this.webSocketCheckingLoop=!0;var t=setInterval((function(){getInjector().getWorkerSocket()&&(clearInterval(t),e.flushPendingMessasges())}),1e3)}},e}(),requirePluginName="requirePlugin",EPanelStatus;function hookRequirePlugin(){var e,t=Object.getOwnPropertyDescriptor(workerGlobal,requirePluginName);t&&!t.configurable||(t&&(e=workerGlobal.requirePlugin),Object.defineProperty(workerGlobal,requirePluginName,{get:function(){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Date.now();sendOrQueueApplogMsg({method:EAppLogEvent.ApiSyncCall,params:{aTime:o,context:{apiName:requirePluginName,option:{arguments:t}}},ext:{origin:EBugmePanelId.AppLog}});try{var r=e.apply(void 0,t);return sendOrQueueApplogMsg({method:EAppLogEvent.ApiSyncCallback,params:{args:r?void 0:[{error:1,errorMessage:"未找到对应插件"}],bTime:Date.now()===o?o+.01:Date.now(),context:{apiName:requirePluginName}},ext:{origin:EBugmePanelId.AppLog}}),r}catch(e){throw sendOrQueueApplogMsg({method:EAppLogEvent.ApiSyncCallback,params:{args:[{error:2,errorMessage:e.message}],bTime:Date.now()===o?o+.01:Date.now(),context:{apiName:requirePluginName}},ext:{origin:EBugmePanelId.AppLog}}),e}}},set:function(t){e=t},enumerable:!0,configurable:!0}))}function updateDebugPanel(e){if(getInjector().getAgentContext().silentMode)return!1;var t="";switch(e){case EPanelStatus.Connecting:t="准备中";break;case EPanelStatus.Connected:t="已连接";break;case EPanelStatus.Disconnected:t="已断开"}AFAppX.bridge.call("showRemoteDebugPanel",{status:e,text:"真机调试"+t,buttonTitle:"退出"})}function enable(e){getInjector().getWorkerSocket().send({id:e.id,result:{}})}function getResponseBody(e){var t=e.params.requestId,n=getInjector(),o=n.getNetworkRecorder(),r=o.getRequest(t);r?n.getWorkerSocket().send({id:e.id,result:{base64Encoded:r.isBase64Body,body:r.responseBody}}):n.getWorkerSocket().send({id:e.id,result:{}}),o.removeRequest(t)}!function(e){e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected"}(EPanelStatus||(EPanelStatus={}));var network=Object.freeze({__proto__:null,enable:enable,getResponseBody:getResponseBody});function enable$1(e){getInjector().getWorkerSocket().send({id:e.id,result:{}});var t=getConsoleOverrider();t&&t.createExecutionContext()}function getProperties(e){var t=getConsoleOverrider();t&&getInjector().getWorkerSocket().send({id:e.id,result:t.parser.getProperties(e.params)})}function compileScript(e){getInjector().getWorkerSocket().send({id:e.id,result:{}})}var evalFunc="function"==typeof __eval?__eval:"function"==typeof eval?eval:function(){};function evaluate(payload){var consoleOverrider=getConsoleOverrider();if(consoleOverrider){var parser=consoleOverrider.parser;"function"!=typeof eval&&(workerGlobal.eval=evalFunc);try{var returnValue=function(){return eval(payload.params.expression)}();getInjector().getWorkerSocket().send({id:payload.id,result:{result:parser.parseObject(returnValue)}})}catch(e){e.stack=e.name+": "+e.message,getInjector().getWorkerSocket().send({id:payload.id,result:{exceptionDetails:{columnNumber:20,exception:parser.parseObject(e),exceptionId:1,lineNumber:0,text:"Uncaught"},result:parser.parseObject(e)}})}}}var runtime=Object.freeze({__proto__:null,enable:enable$1,getProperties:getProperties,compileScript:compileScript,evaluate:evaluate});function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var stringify_1=createCommonjsModule((function(e,t){function n(e,t){var n=[],o=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,n.indexOf(t)).join(".")+"]"}),function(r,a){if(n.length>0){var i=n.indexOf(this);~i?n.splice(i+1):n.push(this),~i?o.splice(i,1/0,r):o.push(r),~n.indexOf(a)&&(a=t.call(this,r,a))}else n.push(a);return null==e?a:e.call(this,r,a)}}(e.exports=function(e,t,o,r){return JSON.stringify(e,n(t,r),o)}).getSerialize=n})),stringify_2=stringify_1.getSerialize,sharedGetCurrentPages;function callGetCurrentPages(){return sharedGetCurrentPages?sharedGetCurrentPages():workerGlobal.getCurrentPages?(sharedGetCurrentPages=workerGlobal.getCurrentPages)():workerGlobal.AFAppX&&AFAppX.getCurrentPages?(sharedGetCurrentPages=AFAppX.getCurrentPages)():[]}function getPagesData(e){var t;var n=getInjector().getRuntime();t=null==n?callGetCurrentPages().filter(Boolean).map((function(e){return{viewId:e.$viewId,data:stringify_1(e.data),route:e.route}})):n.getNav().currentStack.map((function(e){var t=e.getPageLogicInstance().publicInstance;return{viewId:t.$viewId,data:stringify_1(t.data),route:t.route}})),getInjector().getWorkerSocket().send({id:e.id,ext:e.ext,result:{data:t}})}function setPageData(e){var t,n=e.params,o=void 0===n?{}:n,r=o.viewId,a=o.data;var i=getInjector().getRuntime();(t=null==i?callGetCurrentPages().filter((function(e){return e&&""+e.$viewId===r}))[0]:i.getNav().currentStack.map((function(e){return e.getPageLogicInstance().publicInstance})).filter((function(e){return e&&""+e.$viewId===r}))[0])&&a&&t.setData(a)}var data=Object.freeze({__proto__:null,getPagesData:getPagesData,setPageData:setPageData});function getStorageInfo(e){var t=AFAppX.bridge.getStorageInfoSync(),n=t.keys.map((function(e){var t=AFAppX.bridge.getStorageSync({key:e}).data;return{key:e,value:t,type:typeof t}}));getInjector().getWorkerSocket().send({id:e.id,ext:e.ext,result:{currentSize:t.currentSize,limitSize:t.limitSize,data:n}})}function clearStorage(e){AFAppX.bridge.clearStorageSync()}function removeStorage(e){var t=e.params,n=void 0===t?{}:t;n.key&&AFAppX.bridge.removeStorageSync({key:n.key})}function setStorage(e){var t=e.params,n=void 0===t?{}:t;n.key&&AFAppX.bridge.setStorageSync({key:n.key,data:n.value})}var storage=Object.freeze({__proto__:null,getStorageInfo:getStorageInfo,clearStorage:clearStorage,removeStorage:removeStorage,setStorage:setStorage});function enable$2(){var e=getInjector().getMessageQueue();e.setApplogEnabled(!0),e.sendQueuedMessages()}var applog=Object.freeze({__proto__:null,enable:enable$2});function ping(e){getInjector().getWorkerSocket().send({id:e.id,result:{}})}function getSystemInfo(e){var t=AFAppX.bridge.getSystemInfoSync(),n={userAgent:getInjector().getAgentContext().userAgent,sdkVersion:AFAppX.bridge.SDKVersion,alipayVersion:t.version,model:t.model,system:t.system};getInjector().getWorkerSocket().send({id:e.id,result:n})}function getStartupParams$1(e){var t=getStartupParams();getInjector().getWorkerSocket().send({id:e.id,result:t})}var index=Object.freeze({__proto__:null,Data:data,Storage:storage,Applog:applog,ping:ping,getSystemInfo:getSystemInfo,getStartupParams:getStartupParams$1});function getResourceTree(e){getInjector().getWorkerSocket().send({id:e.id,result:{}})}var page=Object.freeze({__proto__:null,getResourceTree:getResourceTree}),protoHandler=Object.freeze({__proto__:null,Network:network,Runtime:runtime,Tiny:index,Page:page}),isWebPlatform=!1;if("undefined"!=typeof WebSocket&&WebSocket.OPEN){isWebPlatform=!0;try{delete workerGlobal.WebSocket}catch(e){}}var BaseImpl=isWebPlatform?WebSocketBrowserImpl:WebSocketNativeImpl,WorkerSocket=function(e){function t(t){var n=e.call(this,t)||this;return n.isMessageReceived=!1,n.isSocketOpenedOnce=!1,n.messageBeforeReceived=[],updateDebugPanel(EPanelStatus.Connecting),n}return __extends(t,e),t.prototype.send=function(e){return this.sendSocketMessage(e)},t.prototype.sendAfterReceivingMessage=function(e){this.isMessageReceived?this.send(e):this.messageBeforeReceived.push("string"==typeof e?e:JSON.stringify(e))},t.prototype.exitDebug=function(){updateDebugPanel(EPanelStatus.Disconnected),this.close(),!isWebPlatform&&getInjector().getAgentContext().isIOS&&[1,2].forEach((function(e){AFAppX.bridge.call("closeSocket",{socketTaskId:e})}))},t.prototype.onSocketOpen=function(){e.prototype.onSocketOpen.call(this),this.isSocketOpenedOnce=!0,this.send({method:EAppLog.Enable,params:{},ext:{origin:EBugmePanelId.AppLog}}),throttledEmitDataChangedEvent()},t.prototype.onSocketClose=function(){e.prototype.onSocketClose.call(this)},t.prototype.onSocketError=function(e){if(!this.isSocketOpenedOnce&&!getInjector().getAgentContext().silentMode){updateDebugPanel(EPanelStatus.Disconnected);var t=e?e.errorMessage||e.message:"closed";AFAppX.bridge.showToast({content:"本次真机调试已结束，请重新生成调试版本 ("+t+")",duration:2e3,success:function(){}})}},t.prototype.onSocketMessage=function(e){var t,n=this;this.isMessageReceived||(this.isMessageReceived=!0,this.messageBeforeReceived.forEach((function(e){n.send(e)})),this.messageBeforeReceived=[]);try{t=JSON.parse(e)}catch(t){return void("CLIENT:JOIN"===e?updateDebugPanel(EPanelStatus.Connected):"CLIENT:LEAVE"===e&&this.exitDebug())}var o=getProtocolHandler(t.method);o?o(t):this.send({id:t.id,error:{code:-32e3,message:"unsupported"}})},t}(BaseImpl);function getProtocolHandler(e){if(e){for(var t=e.split("."),n=protoHandler,o=0,r=t;o<r.length;o++){if(!(n=n[r[o]]))break}return n}}var ignoreDomain=/\/(tyro\/agent|bugme\/channel\/paused)$/,DebugEventListener=function(){function e(){this.isIOS=getInjector().getAgentContext().isIOS,this.isLyra=getInjector().getAgentContext().isLyra}return e.prototype.setup=function(){this.isLyra||this.isIOS?this.listenDebugEvent4IOS():this.listenDebugEvent()},e.prototype.onNetworkRequest=function(e){if(!ignoreDomain.test(e.url)){var t=createProtocol4RequestWillBeSent(e),n=getInjector();n.getWorkerSocket().send(t),n.getNetworkRecorder().setRequest(e.requestId,{method:t.params.request.method,requestHeaders:t.params.request.headers,url:e.url})}},e.prototype.onNetworkResponse=function(e){if(!ignoreDomain.test(e.url)){var t=getInjector(),n=t.getNetworkRecorder().getRequest(e.requestId)||{};t.getWorkerSocket().send(createProtocol4ResponseReceived(e,n)),t.getWorkerSocket().send(createProtocol4LoadingFinished(e)),t.getNetworkRecorder().setRequest(e.requestId,{responseBody:e.body,isBase64Body:!1})}},e.prototype.onNetworkError=function(e){ignoreDomain.test(e.url)||getInjector().getWorkerSocket().send(createProtocol4LoadingFailed(e))},e.prototype.onStorageChanged=function(e){var t={};Object.keys(e.data).forEach((function(n){try{t[n]=JSON.parse(e.data[n]).APDataStorage}catch(e){}})),getInjector().getWorkerSocket().send({method:EStorageEvent.StorageChanged,params:{data:t},ext:{origin:EBugmePanelId.Storage}})},e.prototype.listenDebugEvent4IOS=function(){var e=this,t=AFAppX.bridge;t.on(EWorkerAppEvent.DebugNetworkRequest,(function(t){e.onNetworkRequest(t.data)})),t.on(EWorkerAppEvent.DebugNetworkResponse,(function(t){e.onNetworkResponse(t.data)})),t.on(EWorkerAppEvent.DebugNetworkError,(function(t){e.onNetworkError(t.data)})),t.on(EWorkerAppEvent.DebugStorageChanged,(function(t){e.onStorageChanged(t.data)}))},e.prototype.listenDebugEvent=function(){var e=this;AFAppX.bridge.on(EWorkerAppEvent.DebugConsole,(function(t){var n,o=t.data,r=o.type,a=o.content;try{n=JSON.parse(a)}catch(e){return}switch(r){case EWorkerAppEvent.DebugNetworkRequest:e.onNetworkRequest(n);break;case EWorkerAppEvent.DebugNetworkResponse:e.onNetworkResponse(n);break;case EWorkerAppEvent.DebugNetworkError:e.onNetworkError(n);break;case EWorkerAppEvent.DebugStorageChanged:e.onStorageChanged(n)}}))},e}(),WorkerListener=function(){function e(){this.inited=!1}return e.prototype.setup=function(){if(this.inited)return!1;var e=AFAppX.bridge;if(/^1\./.test(e.SDKVersion)){var t=debounce(this.onPageResumeOrPause.bind(this),300,setTimeout,clearTimeout);e.on(EWorkerAppEvent.PageResume,t),e.on(EWorkerAppEvent.PagePause,t)}e.on(EWorkerAppEvent.DebugPanelClick,this.onDebugPanelClick),this.debugEventListener=new DebugEventListener,this.debugEventListener.setup(),this.inited=!0},e.prototype.onPageResumeOrPause=function(){throttledEmitDataChangedEvent()},e.prototype.onDebugPanelClick=function(){var e=getInjector().getWorkerSocket();e&&e.exitDebug()},e}(),globalListener;function getGlobalWorkerEventListener(){return globalListener||(globalListener=new WorkerListener),globalListener}function getChannelUrl(){if("string"==typeof __BUGME_EXTERNAL_WORKER_URL__&&__BUGME_EXTERNAL_WORKER_URL__)return __BUGME_EXTERNAL_WORKER_URL__;var e=getInjector().getAgentContext(),t=e.channelId,n=e.channelConfigKey;return"wss://"+(channelDomainConfig[n]||channelDomainConfig[0]).hpmweb+"/bugme/client_w/"+t}var DebugAgent=function(){function e(){}return e.prototype.init=function(){getGlobalWorkerEventListener().setup(),this.makeConnection(),this.printSDKVersion()},e.prototype.makeConnection=function(){var e=getInjector(),t=getChannelUrl(),n=new WorkerSocket(t);e.setWorkerSocket(n),e.getAgentContext().isIOS?n.open():setTimeout((function(){n.open()}),1200)},e.prototype.printSDKVersion=function(){var e=AFAppX.bridge.SDKVersion;/^2\./.test(e)&&setTimeout(console.log.bind(console,"SDKVersion: "+e))},e}(),globalAgent;function getAgent(){return globalAgent||(globalAgent=new DebugAgent),globalAgent}var LOG_STYLE="color: #3D80F3; font-weight: bold;";function printStaticPlugins(){var e=getStartupParams().__appxPluginsExtra||{},t=Object.keys(e).map((function(t){return{plugin_id:t,deploy_version:e[t].version}}));t.length&&(console.log("%c--- Static Plugin List ---",LOG_STYLE),console.table(t))}var loadPluginName="loadPlugin";function hookLoadPlugin(){var e,t=Object.getOwnPropertyDescriptor(workerGlobal.my,loadPluginName);t&&!t.configurable||(t&&(e=workerGlobal.my.loadPlugin),Object.defineProperty(workerGlobal.my,loadPluginName,{get:function(){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if("object"==typeof t[0]){var o=t[0].success;t[0].success=function(){printDynamicPlugin(t[0].plugin),void 0!==o&&o.apply(this,arguments)}}return e.apply(void 0,t)}},set:function(t){e=t},enumerable:!0,configurable:!0}))}function printDynamicPlugin(e){var t=e.split("@")[0],n=getInjector().getRuntime().getMiniExtensionManager().extensionVersions;setTimeout((function(){console.log("%c--- Loaded Dynamic Plugin ---",LOG_STYLE),console.table([{plugin_id:t,deploy_version:n.get(t)}])}),100)}function setupPluginInfo(){console.log("%cTip: you can type `printPlugins()` anytime to print loaded plugins info","color: #3D80F3;"),hookLoadPlugin(),printStaticPlugins(),workerGlobal.printPlugins=printPlugins}function isUsePlugin(){var e=getInjector().getRuntime();if(void 0===e)return!1;var t=e.getMeta().meta;return"object"==typeof t.plugins&&0!==Object.keys(t.plugins).length||t.useDynamicPlugins}function printPlugins(){var e;printStaticPlugins();var t=(null===(e=getStartupParams())||void 0===e?void 0:e.__appxPluginsExtra)||{},n=getInjector().getRuntime().getMiniExtensionManager().extensionVersions,o=[];n.forEach((function(e,r){void 0===t[r]&&o.push({plugin_id:r,deploy_version:n.get(r)})})),console.log("%c--- Loaded Dynamic Plugin List ---",LOG_STYLE),console.table(o)}function main(){try{registerAppxHook(),initConsoleOverrider(),hookRequirePlugin()}catch(e){error("sync task error",e)}runAfterAppx((function(){runAfterAppXBridgeReady((function(){try{getAgent().init(),isUsePlugin()&&setupPluginInfo()}catch(e){error("init agent error",e)}}))}))}var inPluginWorker="object"==typeof AFAppX&&AFAppX.Plugin;if(!workerGlobal.__BUGME_ON__&&!inPluginWorker){workerGlobal.__BUGME_ON__=!0;try{main()}catch(e){error("init error",e)}}}();
 /**! __BUGME_END__ */
if(!self.__appxInited) {
self.__appxInited = 1;


require('./config$');
require('./importScripts$');

var AFAppX = self.AFAppX;
self.getCurrentPages = AFAppX.getCurrentPages;
self.getApp = AFAppX.getApp;
self.Page = AFAppX.Page;
self.App = AFAppX.App;
self.my = AFAppX.bridge || AFAppX.abridge;
self.abridge = self.my;
self.Component = AFAppX.WorkerComponent || function(){};
self.$global = AFAppX.$global;
self.requirePlugin = AFAppX.requirePlugin;


if(AFAppX.registerApp) {
  AFAppX.registerApp({
    appJSON: appXAppJson,
  });
}



function success() {
require('../../app');
require('../../node_modules/mini-ali-ui-rpx/es/am-icon/index?hash=05d2a9730dd6009bf9446182f9c985f40f8c0f43');
require('../../node_modules/mini-ali-ui-rpx/es/title/index?hash=4dc76819ab39c9009cae231986217ccac63ee3f3');
require('../../node_modules/mini-ali-ui-rpx/es/popup/index?hash=05d2a9730dd6009bf9446182f9c985f40f8c0f43');
require('../../common/cop/AddressPicker/AddressPicker?hash=05d2a9730dd6009bf9446182f9c985f40f8c0f43');
require('../../pages/index/index?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/loginzfb/loginzfb?hash=a16474da6092abe82a020d9cbe7b8d3216615163');
require('../../pages/fill/Fill?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/phone/phone?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/message/message?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/message_details/message_details?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/merchant/merchant?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/merdetails/merdetails?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/my/my?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/map/map?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/file/file?hash=2ef798281d17ba125515042c930af1b5791f0123');
require('../../pages/order/order?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/specialty/specialty?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/appointment/appointment?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/order/order_eight/order_eight?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/order/order_item/order_item?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/file/file_y/file_y?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/order/order_details/order_details?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/aboutus/aboutus?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/scancode/scancode?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/start/start?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/ledge/ledge?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/cfxform/cfxform?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
require('../../pages/survey/survey?hash=32d7d2807ed4e666ef03b4b3fe8c38ecf2e34e68');
}
self.bootstrapApp ? self.bootstrapApp({ success }) : success();
}